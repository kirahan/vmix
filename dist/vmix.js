!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=29)}([function(e,t){var n={};"undefined"!=typeof window?n.platform="web":n.platform="mob",e.exports=n},function(e,t){function n(e,t){for(var n,r=e.length,a=new Array(r),i=0,o=0,s=0,l=r&&""!==e[0];o<r;++o)n=e[o],".."===n?i>1?--i:l?++s:a[0]="":"."===n||0!==i&&!t&&""===n||(a[i++]=n);if(s)for(a[--s]=a[i-1],i=s+1;s--;)a[s]="..";return a.length=i,a}var r={};e.exports=r;var a={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},i=function(e){return a[e]};r.htmlescape=function(e){return"string"!=typeof e?e:e.replace(/[&<>"]/gim,i)},r.normalizeId=function(e,t){return e=e.replace(/\/+$/g,""),n((t?t+"/../"+e:e).split("/")).join("/")},r.normalizeUrl=function(e,t){if(!/^\w+:/.test(e)){var r=t.fullhost,a=t.pathname;"/"!=e.charAt(0)&&e.charAt(0),"/"===e.charAt(0)?e=r+n(e.split("/")).join("/"):(a+=("/"===a.charAt(a.length-1)?"":"/../")+e,e=r+n(a.split("/")).join("/"))}return e},r.calUrl=function(e,t){var r=t,a=e;return"/"!==t.charAt(0)&&(t="/"+t),"/"===a.charAt(0)?a=n(a.split("/")).join("/"):(r+=("/"===r.charAt(r.length-1)?"":"/../")+a,a=n(r.split("/")).join("/")),a},r.gen_path=function(e,t,n){var a=window.location;return t&&0==t.indexOf(a.fullhost)&&(t=t.substr(a.fullhost.length)),t=t||a.pathname,-1==e.indexOf("://")&&(e=r.normalizeId(e,"."==e[0]?t:"")),-1==e.indexOf("://")&&(e=r.normalizeUrl(e,a)),n?(e=e.split("//")[1],e&&(e=e.substr(e.indexOf("/"))),e):e},r.cal_spec_path=function(e,t){"deps"!=e.from&&(-1==e.url.indexOf("://")&&(e.url=r.gen_path(e.url,t||e.pvmpath)),e.knowpath&&e.id||(e.id=e.url.split("//")[1],e.id&&(e.id=e.id.substr(e.id.indexOf("/")))))},Object.defineProperty?r.defineConstant=function(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,enumerable:!1,configurable:!1})}:r.defineConstant=function(e,t,n){e[t]=n}},function(e,t,n){function r(e,t,n,r){var i={};return a.isfn(t)?i.block=t:i.exports=t,"vm"==n?a.gcache.newvmlib(e,i,r):a.gcache.newjslib(e,i,r),i}var a=n(0),i=(n(1),function(e){return a.gcache.get_jslib(e)||a.wap.config.path.lib[e]&&(e=a.wap.config.path.lib[e]),o(e,"","lib","inreq")}),o=function(e,t,n,r,o){var s;if(!(s="lib"==n||"json"==n?a.gcache.get_jslib(e):a.gcache.vmlib[e]))return null;if(s&&void 0===s.exports){var l=s.block;delete s.block,s.exports={};try{l.call(null,i,s,s.exports,a.wap)}catch(t){a.onerror("inrequire_execute_error",e,t),s.exports={}}}return s.exports?"inreq"==r?a.tool.objClone(s.exports):s.exports:null};o.define=r,o.loadfilefresh_clear=function(e){a.gcache.loadfilefresh_clear(e)},e.exports=o},function(e,t,n){var r=n(0);r.onerror=function(e,t,n){var a=r.wap.onerror;r.isfn(a)&&a.apply(r.wap,arguments)},r.onload=function(e,t,n){var a=r.wap.onload;if(r.isfn(a)){var i;try{i=a.apply(r.wap,arguments)}catch(e){}return i}},r.elget=function(e,t){return e?e.getAttribute(t):""},r.elset=function(e,t,n){return!!e&&e.setAttribute(t,n)},r.getprefn=function(e,t,n){var a;return e[t]&&"object"==typeof e[t]&&(a=e[t][n]),r.isfn(a)||(a=e[n]),r.isfn(a)||(a=e[t+"_js_"+n]),r.isfn(a)?a:null},r.devalert=function(e,t){console.error({title:"dev alert:"+e.toString(),message:t?t.toString():""})},r.tryvmfn=function(e,t,n){if(e)if(r.isfn(e[n]))try{e[n].call(e,t)}catch(t){r.devalert("vm."+n+":"+e.id,t)}else if(r.isfn(e.hook))try{e.hook.call(e,n,t)}catch(t){r.devalert("vm.hook."+n+":"+e.id,t)}},r.tryfn=function(e,t,n,a){if(r.isfn(t)){Array.isArray(n)||(n=[n]);return t.apply(e,n)}};const a=/^[\t\s]*\/\*\*?[^!][\s\S]*?\*\/[\r\n]/gm,i=/^[\t\s]*\/\*!\*?[^!][\s\S]*?\*\/[\r\n]/gm,o=/^[\t\s]*(\/\/)[^\n\r]*[\n\r]/gm;r.delrem=function(e){return e+="",e.replace(a,"").replace(i,"").replace(/\/\*([\S\s]*?)\*\//g,"").replace(/\<\!\-\-[\s\S]*?\-\-\>/g,"").replace(/\s*[\n\r]/g,"\n").replace(o,"\n").replace(/\;\s*\/\/.*(?:\r|\n|$)/g,";\n").replace(/\,\s*\/\/.*(?:\r|\n|$)/g,",\n").replace(/\{\s*\/\/.*(?:\r|\n|$)/g,"{\n").replace(/\)\s*\/\/.*(?:\r|\n|$)/g,")\n").replace(/([\n\r]\s*[\n\r]){1,}/g,"\n")},r.isfn=function(e){return"function"==typeof e},r.isobj=function(e){return"object"==typeof e},r.isstr=function(e){return"string"==typeof e}},function(e,t,n){var r=n(0),a=0,i=function(){this.sid=++a,this.config={},r.rootvmset.checkappconfig(this,0),this.hasstart=0,this.__events={}},o=i.prototype;o.sub=function(e,t,n){this.__events[e]=this.__events[e]||[],this.__events[e].push([t,n,0])},o.subonce=function(e,t,n){this.__events[e]=this.__events[e]||[],this.__events[e].push([t,n,1])},o.unsub=function(e,t,n){var r=this.__events[e];if(r)for(var a=r.length-1;a>-1;a--)t==r[a][0]&&n==r[a][1]&&r.splice(a,1)},o.pub=function(e,t,n,a){"function"!=typeof a&&(a=function(){});var i=this.__events[e];if(!i)return a({error:"no.listener"});r.tool.each(i,function(e,t){-1===e[2]&&delete i[t]}),r.tool.each(i,function(e){e[1].call(e[0],t,n,function(t){a.call(n,t,e[0])}),1==e[2]&&(e[2]=-1)});for(var o=i.length-1;o>-1;o--)-1==i[o][2]&&i.splice(o,1)},o.loadfile=function(e,t,n){var a={url:t};a.type="vm"==e?"vm":"text"==e?"text":"lib",a.urlid=2,a.refid=2,r.require.load(a,function(e,t,a){r.isfn(n)&&n(e,t,a)})},o.setData=function(e,t,n,a){if(e instanceof r.define.vmclass){if(r.isfn(a)||(a=this.blankvm.__blankfn),-1==e[r.aprand].datafrom_store.indexOf(t.split(".")[0]))return a(!1);var i=e.__getData(t);if(i===n)return void a(!1);this.blankvm.__confirm_set_data_to_el(e,t,n),a(!0);var o=e.event["app.setdata"];r.isfn(o)&&o.call(e,{path:t,oldv:i,newv:n})}},o.addData=function(e,t,n,a,i){if(e instanceof r.define.vmclass){if(r.isfn(i)||(i=this.blankvm.__blankfn),-1==e[r.aprand].datafrom_store.indexOf(t.split(".")[0]))return i(!1);this.blankvm.__confirm_add_data_to_el(e,t,n,a,function(e){i(e)});var o=e.event["app.adddata"];r.isfn(o)&&o.call(e,{path:t,index:n,value:a})}},o.delData=function(e,t,n,a,i){if(e instanceof r.define.vmclass){if(r.isfn(i)||(i=this.blankvm.__blankfn),-1==e[r.aprand].datafrom_store.indexOf(t.split(".")[0]))return i(!1);this.blankvm.__confirm_del_data_to_el(e,t,n,a||1,function(e){i(e)});var o=e.event["app.deldata"];r.isfn(o)&&o.call(e,{path:t,index:n,count:a})}},o.use=function(e,t,n){if(r.isstr(e))if(r.isobj(t))for(var a in t)this.use(e,a,t[a]);else if(r.isstr(t)){if("vm"==e){if(!r.isobj(n)||!n.template&&!n.body)return;return r.gcache.vmbody[t]=n.template||n.body,r.gcache.vmstyle[t]=n.style||"",void r.gcache.newvmlib(t,{exports:n.lib||{}})}if("lib"==e)return void r.gcache.newjslib(t,{exports:n});("block"!==e||r.isstr(n))&&("block"===e||r.isfn(n))&&("vmprototype"==e?r.define.extend(t,n,this):r.gcache.use[e]&&(r.gcache.use[e][t]=n))}},e.exports=i},function(e,t,n){var r=n(0),a=0,i=function(){this.urlsid=10,this.sid=++a,this.vmsbysid={},this.vmparent={},this.importvmsrc={},this.importblock_src={},this.importblock_txt={},this.importstyle={},this.vmbody={},this.vmstyle={},this.vmlib={},this.jslib={},this.urlid={},this.idtourl={},this.use={filter:{},method:{},operator:{},domevent:{},dataevent:{},block:{},elhook:{}}},o=i.prototype;n(30).setproto(o),n(31).setproto(o),o.loadfilefresh_clear=function(e){this.vmlib[e]&&(delete this.vmlib[e],delete this.vmbody[e],delete this.vmstyle[e]),this.jslib[e]&&delete this.jslib[e]},o.clean_when_vm_close=function(e){var t=e.absrc,n=e[r.aprand].absrcid;if(this.vmlib[t]&&this.vmlib[t].refids){var a=0;for(var i in this.vmsbysid)0!=this.vmsbysid[i][r.aprand].has_started&&this.vmsbysid[i][r.aprand].absrcid===e[r.aprand].absrcid&&a++;if(!(a>0)){delete this.vmbody[t],delete this.vmstyle[t],delete this.vmlib[t];for(var o in this.importblock_src)if(0==o.indexOf(n+":")){var s=this.importblock_src[o],l=this.importblock_txt[s];if(l&&l.refids){var d=l.refids.indexOf(n);d>-1&&l.refids.splice(d,1),0==l.refids.length&&delete this.importblock_txt[s]}delete this.importblock_src[o]}for(var o in this.importstyle)if(this.importstyle[o].refids){var d=this.importstyle[o].refids.indexOf(n);d>-1&&this.importstyle[o].refids.splice(d,1),0==this.importstyle[o].refids.length&&delete this.importstyle[o]}for(var o in this.importvmsrc)if(0==o.indexOf(n+":")){for(var i in this.vmsbysid)if(this.vmsbysid[i].absrc===this.importvmsrc[o]){var c=this.vmlib[this.importvmsrc[o]];if(c&&c.refids){var d=c.refids.indexOf(n);d>-1&&(c.refids.splice(d,1),this.clean_when_vm_close(this.vmsbysid[i]))}break}delete this.importvmsrc[o]}for(var o in this.vmlib){var p=this.vmlib[o];if(p&&Array.isArray(p.refids)){var d=p.refids.indexOf(n);d>-1&&(p.refids.splice(d,1),0==p.refids.length&&delete this.vmlib[o])}}for(var o in this.jslib){var p=this.jslib[o];if(p&&Array.isArray(p.refids)){var d=p.refids.indexOf(n);d>-1&&(p.refids.splice(d,1),0==p.refids.length&&delete this.jslib[o])}}}}},o.check_if_vm_inpath=function(e){for(var t in r.wap.config.path.vm)r.wap.config.path.vm[t]===e&&(r.gcache.vmlib[e].refids=void 0)},o.check_if_lib_inpath=function(e){for(var t in r.wap.config.path.lib)r.wap.config.path.lib[t]===e&&(r.gcache.jslib[e].refids=void 0)},o.removesid=function(e){delete this.vmsbysid[e];for(var t in this.vmparent)this.vmparent[t]==e&&this.removesid(t)},e.exports=i},function(e,t,n){var r=n(0),a=function(e,t){e[r.aprand].node_max_sn=1;var n=e.template||t||"";n=r.calif.multi(e,n);var a=r.calhtmltojson(n,e[r.aprand].node_max_sn);e[r.aprand].nodejson.push(a[0])},i=function(e,t,n,a){return e[r.aprand].seed_of_el_aid++,a+"_elid_"+e.sid+"_"+e[r.aprand].seed_of_el_aid},o=function(e,t,n){return t.id||(e[r.aprand].seed_of_el_aid++,t.id="vm_elid_"+e.sid+"_"+e[r.aprand].seed_of_el_aid),t.id},s=function(e,t,n,r){var a="",i=e;if(t==i.alias)a=i.path,void 0!=i.listdata&&void 0!==i.$index&&(a+="."+i.$index);else for(;;){if(0==t.indexOf(i.alias+".")){a=i.path,void 0!==i.listdata&&void 0!==i.$index&&(a+="."+i.$index),a+="."+t.replace(i.alias+".","");break}if(null==(i=i.pscope))break}return a||(a=t),"."==a[0]&&(a=a.substr(1)),a},l=function(e,t,n,a){var i,o=new Function("e","return   [ "+n+" ] ");try{i=o.call({},null)}catch(e){}if(Array.isArray(i)&&i[0]){if(a)return i[0];e[t]=e[t]||{},"object"==typeof i[0]&&r.tool.deepmerge(e[t],i[0])}};e.exports={nodejson:a,nodeid:o,forece_calnodeid:i,now_path:s,merge_json_str:l}},function(e,t,n){var r=n(0),a=function(e,t){for(var n,r=t.split("."),a=e,i=0,o=r.length;i<o;i++)if("pscope"==r[i]){if(!(a=a.pscope))break}else{if("$index"==r[i]&&i==o-1){n=a.$index;break}"$value"==r[i]&&(n=a.listdata[a.$index])}return n},i=function(e){return e.replace(/^\s*|\s*$/g,"")},o=function(e,t,n,i){t=t||"","!"==e[0]&&(e=e.substr(1));var o=r.getprefn(n,"method",e),l=t.split(",");if(r.isfn(o)||(o=r.gcache.use.method[e]),r.isfn(o)){if(void 0!=i.$index)for(var d=0,c=l.length;d<c;d++)l[d]=r.tool.trim(l[d]),"$index"==l[d]?l[d]=i.$index:"$value"==l[d]?l[d]=i.listdata[i.$index]:l[d].indexOf("pscope.")>-1&&(l[d]=a(i,l[d]));var p;try{p=o.apply(n,l)}catch(t){r.devalert("method."+e,t)}return void 0===p?"":p}if(e.indexOf(".")>-1){var f=e.substr(0,e.lastIndexOf(".")),u=e.substr(e.lastIndexOf(".")+1),h=s(f,n,i);return void 0!==h&&r.isfn(h[u])?h[u].apply(n,l)+"":(r.onerror("no_method_when_cal",n.absrc,{funcname:e,para:t}),"")}return""},s=function(e,t,n,i){if(void 0===e||""===e)return e;var o="";e=r.tool.trim(e);var l=e.replace(/^[\'\"]*|[\'\"]*$/g,"");if(l.length+2==e.length)return l;"!"==e[0]&&(e=e.substr(1));var d=r.tool.parse_func_para(e);if(void 0==d[1])if("this."==e.substr(0,5))void 0==(o=r.tool.objGetDeep(t,e.substr(5)))&&(r.onerror("data_path_error1",t.absrc,{path:e}),o="");else if("$index"==e)o=n.$index;else if("$value"==e)o=n.listdata[n.$index];else if(e.indexOf("pscope.")>-1)o=a(n,e);else{var c=r.cal.now_path(n,e,t,"calval");if(void 0===(o=0===c.indexOf("this.")?r.tool.objGetDeep(t,c.substr(5)):r.tool.objGetDeep(t.data,c))){if("!"==e[e.length-1])return s(e.substr(0,e.length-1),t,n,i);r.onerror("data_path_error2",t.absrc,{path:e}),o=""}}else o=r.calexp.method(d[0],d[1],t,n);return o},l=function(e,t,n){var a=e.split("|"),i=a[0];if(a.length>1&&i)for(var o=1;o<a.length;o++){a[o]=r.tool.trim(a[o]);var s=r.getprefn(t,"filter",a[o]);if(r.isfn(s)||(s=r.gcache.use.filter[a[o]]||r.getprefn(t,"method",a[o])),r.isfn(s))try{i=s.call(t,i)}catch(e){i="",r.devalert("filter :"+a[o],e)}}return i},d=function(e,t,n,a){var o=r.gcache.use.operator;return t.replace(/{(.*?)}/g,function(t,a){var s="";"_exptext_"==c&&("!"==a[0]&&(a=a.substr(1)),"!"==a[a.length-1]&&(a=a.substr(0,a.length-1)));var d=0;for(var c in o)if(a.indexOf(c)>-1){s=o[c](a),d=1;break}return 1==d&&void 0!==s&&""!==s?s:(a.indexOf(" | ")>-1?s=l(a,e):(a=i(a),s=r.calexp.val(a,e,n,"exp6")+""),s+"")})},c=function(e,t,n,r){if(-1===t.indexOf("{"))return t;if("string"!=typeof t)return"";if(t=i(t),t=t.replace("{%","{").replace("%}","}"),t.split("{").length!==t.split("}").length)return t;if(t.indexOf("{")==t.lastIndexOf("{")&&t.indexOf("}")==t.lastIndexOf("}"))return d(e,t,n);for(;t.indexOf("{")>-1;){var a=t.lastIndexOf("{"),o=t.indexOf("}",a);if(-1==o)break;var s=t.substring(a,o+1);t=t.substr(0,a)+d(e,s,n)+t.substr(o+1)}if(t.indexOf("{")>-1)for(;t.indexOf("{")>-1&&t.indexOf("}");){var a=t.indexOf("{"),o=t.indexOf("}",a);if(-1==o)break;var s=t.substring(a,o+1);t=t.substr(0,a)+d(e,s,n)+t.substr(o+1)}return t},p=function(e,t,n){if(t.attrexp)for(var a in t.attrexp){var i=r.calexp.exp(e,t.attrexp[a],n);t.attr[a]=i}};e.exports={nodeattrexp:p,val:s,exp:c,method:o}},function(e,t,n){function r(e){return!(e.indexOf(":")>-1||e.indexOf("|")>-1||e.indexOf("?")>-1||e.indexOf("(")>-1||e.indexOf(")")>-1)}function a(e){return e.replace(/^['"`]|['"`]$/g,"")}function i(e,t,n){e.watchs=e.watchs||[],t=t.split("-watch-");for(var r=0,a=t.length;r<a;r++)e.watchs.push([t[r].replace(/\-/g,"."),n])}var o=n(0),s=function(e){return e.replace(/^\s*|\s*$/g,"")},l=function(e){for(var t=0,n=e.length;t<n;t++)if(e.charCodeAt(t)>32)return!1;return!0},d=/^<\s*\/\s*([\w-_]+)\s*>/,c=/^<\s*([\w]{1,})\s*/,p=/^\s*\/\s*>/,f=0,u=1,h=2,v=0,_=function(e,t,n){function _(t,n){var r=A(c,"start");if(r){var a={sn:v++,psn:void 0!=n?n:t?t.sn:0,id:"",tag:r[1],utag:r[1].toLowerCase(),attr:{},dir:{},childNodes:[],parentNode:t};if(E[a.sn]=a,m(a),a.attr&&a.attr.class?(a.classList=a.attr.class.split(" "),delete a.attr.class):a.attrexp&&a.attrexp.class?(a.classList=a.attrexp.class.split(" "),delete a.attrexp.class):a.classList=[],A(p,"slefclose"))return a;var i=e.indexOf(">");e=e.slice(i+1);var o=a.tag.toLowerCase();if("br"==o||"hr"==o)return a;for(g(a);!A(d,"close",a.tag,a)&&e;)g(a);return a}}function m(t){for(var n=0,a=0;!(N()||C(">")||C("?>")||C("/>"));){n=1,a=1;var o=O();if(o)if("data"==t.tag||"option"==t.tag)t.attr[o.name]=o.value;else if("id"==o.name)t.id=o.value;else if("el-filter"==o.name||"el-hook"==o.name||"list"==o.name)t.dir[o.name]=o.value;else if("watch-"==o.name.substr(0,6))o.name=o.name.substr(6),"["==o.name[0]&&"]"==o.name[o.name.length-1]&&(o.name=o.name.substr(1,o.name.length-2)),i(t,o.name,o.value);else if("on-"==o.name.substr(0,3))t.event=t.event||{},t.event[o.name.substr(3)]=o.value;else if("event-"==o.name.substr(0,6))t.vmevent=t.vmevent||{},t.vmevent[o.name.substr(6)]=o.value;else{var d=o.value.match(/{([\S\s]*?)}/);if(null==d)t.attr[o.name]=o.value,"true"===o.value.toLowerCase()?t.attr[o.name]=!0:"false"===o.value.toLowerCase()&&(t.attr[o.name]=!1);else{t.attrexp=t.attrexp||{};var c=o.value.lastIndexOf("{");if(0==c&&0==d.index&&d[0]==o.value&&r(d[1])){var p=s(d[1]),v=0,_=0;"!"==p[0]&&(v=1,p=p.substr(1)),"!"==p[p.length-1]&&(_=1,p=p.substr(0,p.length-1));var m=f;0==p.indexOf("this.option.")?(m=u,v=1,_=0):0==p.indexOf("this.state.")&&(m=h),t.attrexp[o.name]="{"+p+"}",v&&i(t,p,"toel-"+o.name),_&&(t.event=t.event||{},m==h?t.event.change="tostate-"+p.replace("this.state.",""):m==f&&(t.event.change="todata-"+p))}else t.attrexp[o.name]=o.value,y(t,o.value,"toel-"+o.name)}}else n=0,o=k(),o?l(o.name)||(o.name=o.name.replace(/\W/g,""),o.name&&(t.attr[o.name]=!0)):a=0;n+a==0&&(e=e.slice(e.indexOf(">")))}}function g(e){for(var t,n,r=0,a=0;;)if(r=1,a=1,t=_(e),t?e.childNodes.push(t):r=0,n=j(),n?w(e,n):a=0,r+a==0)break}function b(e,t){var n={tag:e,utag:e,childNodes:[],dir:{},attr:{},psn:t.sn,sn:v++,parentNode:t};return E[n.sn]=n,t.childNodes.push(n),n}function x(e){if(e.indexOf("|")>-1||e.indexOf("?")>-1&&e.indexOf(":")>-1||e.indexOf("(")>-1&&e.indexOf(")")>-1||e.indexOf("&&")>-1)return!0}function y(e,t,n){if("toel-text"==n||!x(t)){var r=[];t.replace(/([\S\s]*?)\{([\S\s]*?)\}/g,function(e,t,n,a,i,o,l){(n=s(n))&&(0==n.indexOf("this.option.")&&"!"!=n[0]&&(n="!"+n),"!"==n[n.length-1]&&(n=n.substr(0,n.length-1)),"!"===n[0]&&-1===r.indexOf(n)&&r.push(n.substr(1)))});for(var a=0,o=r.length;a<o;a++)i(e,r[a],n)}}function w(e,t){if(!l(t)){t.indexOf("\\u")>-1&&(t=t.replace(/\\u[a-fA-F0-9]{4}/g,function(e,t,n){return unescape(e.replace(/\\u/,"%u"))})),t.indexOf("\\U")>-1&&(t=t.replace(/\\U[a-fA-F0-9]{4}/g,function(e,t,n){return unescape(e.replace(/\\U/,"%u"))}));var n=e.tag.toLowerCase();if(o.wap.config.precode.indexOf(n)>-1)return e.attr=e.attr||{},void(e.attr.text=o.tool.htmlunescape(t));if(null!=t.match(/{([\S\s]*?)}/g)){if(x(t)){var r=b("_exptext_",e);return r.text="",r.exp_text=t,void y(r,t,"toel-text")}t.replace(/([\S\s]*?)\{([\S\s]*?)\}/g,function(t,n,r,a,o,l,d){if(s(n)){var c=b("_text_",e);c.text=s(n)}if(r=s(r)){"!"==r[r.length-1]&&(r=r.substr(0,r.length-1));var c=b("_exptext_",e);c.text="",c.exp_text="{"+r+"}",0==r.indexOf("this.option.")&&"!"!=r[0]&&(r="!"+r),"!"===r[0]&&i(c,r.substr(1),"toel-text")}});var a=t.lastIndexOf("}");if(a!=t.length-2){var d=t.substr(a+2);if(s(d)){var r=b("_text_",e);r.text=s(d)}}}else if("text"==n)e.text=t;else{var r=b("_text_",e);r.text=t}}}function j(){var e=A(/^([^<]*)/,"content");return e?e[1]:""}function k(){var e=A(/^\s*([_-\w]+)\s*/,"attrstate");if(e)return{name:e[1],value:e[1]}}function O(){var e=A(/([_-\w]+)\s*=\s*(\`[^`]*\`|"[^"]*"|'[^']*'|[ ]|[^<>\/\s]*)\s*/,"attr");if(e)return{name:s(e[1]),value:s(a(e[2]))}}function A(t,n,r,a){var i=e.match(t);if("attr"==n){if(i&&i.index>0&&!l(i.input.substr(0,i.index)))return}else if("close"==n)return i?(e=e.substr(i.index+i[0].length),i[1]==r||i[1].toLowerCase()==r.toLowerCase()||!!o.wap.config.strategy.force_close_not_match_close_tag):(e=e.slice(e.indexOf(">")+1),!!o.wap.config.strategy.force_close_error_close_tag);if(i)return e=e.slice(i.index+i[0].length),i}function N(){return 0==e.length}function C(t){return 0==e.indexOf(t)}e=s(e),e=e.replace(/\<\!--[\s\S]*?--\>/g,""),e="<_root_>"+e+"</_root_>",v=t||0,n=n||0;var E=[];return function(){return{_root_:_(null,n),nodescache:E}}()};e.exports=function(e,t,n){e=e.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*\>\n/,"").replace(/<!DOCTYPE.*\>\n/,"").replace(new RegExp("<script[^]*>[\\s\\S]*?<\/script>","gi"),"").replace(new RegExp("<style[^]*>[\\s\\S]*?</style>","gi"),"").replace(/\/\s*>/g,"/>").replace(/\/\>/g," />").replace(/\<\>/g,"");var r=_(e,t,n);return[r._root_,r.nodescache]}},function(e,t,n){var r=n(0),a=function(e,t,n){n=n||{};var a,i,o,s,l=t;if(t.indexOf(">=")>-1?(i=t.split(">="),s=">="):t.indexOf("<=")>-1?(i=t.split("<="),s="<="):t.indexOf("!==")>-1?(i=t.split("!=="),s="!=="):t.indexOf("===")>-1?(i=t.split("==="),s="=="):t.indexOf("==")>-1?(i=t.split("=="),s="=="):t.indexOf(">")>-1?(i=t.split(">"),s=">"):t.indexOf("<")>-1&&(i=t.split("<"),s="<"),i&&s){l=r.tool.trim(i[0]),a=r.calexp.exp(e,r.tool.trimquota(r.tool.trim(i[1])),n,"cal_els_filter"),o=r.calexp.exp(e,l,n,"cal_els_filter");var d=!1;return">="==s?1+Number(o)>=1+Number(a)&&(d=!0):">"==s?1+Number(o)>1+Number(a)&&(d=!0):"<="==s?1+Number(o)<=1+Number(a)&&(d=!0):"<"==s?1+Number(o)<1+Number(a)&&(d=!0):"=="==s?o+""==a+""&&(d=!0):"!=="==s&&o+""!=a+""&&(d=!0),d}return!(!(o=r.calexp.exp(e,t,n,"cal_els_filter"))||"null"===o||"false"===o||"undefined"===o)},i=function(e,t,n){return a(t,e,n)},o=function(e,t){return t.replace(/{%[ ]{0,}if([\s\S]*?){%[ ]{0,}endif[ ]{0,}%}/g,function(t,n,i){var o=[],s=[],l=[],d=[];t.replace(/{%([\s\S]*?)%}([\s\S]*?)/gm,function(e,t,n,r){o.push(t),l.push(r),d.push(e.length)});for(var c=0,p=l.length-1;c<p;c++)s.push(t.substr(l[c]+d[c],l[c+1]-l[c]-d[c]));for(var f=-1,u=0,p=o.length;u<p;u++){o[u]=r.tool.trim(o[u]);var h=!1;if(0==o[u].indexOf("elseif ")||0==o[u].indexOf("else if ")?h=a(e,r.tool.trim(o[u].substr(7))):0==o[u].indexOf("if ")?h=a(e,r.tool.trim(o[u].substr(3))):"else"==o[u]&&(h=!0),1==h){f=u;break}}return f>-1?s[f]:""})},s=function(e,t,n,r,a,o){if(n)if("else"==n){for(var s=0,l=r-1;l>o;l--)if(1==t[l]){s=1;break}t[r]=0==s}else if("elseif:"==n.substr(0,7)){for(var s=0,l=r-1;l>o;l--)if(1==t[l]){s=1;break}1==s?t[r]=!1:!1===t[r-1]&&(t[r]=i(n.substr(7),e,a))}else"if:"==n.substr(0,3)?t[r]=i(n.substr(3),e,a):t[r]=i(n,e,a);else t[r]=!0};e.exports={single:s,multi:o}},function(e,t,n){var r=n(0);e.exports.create=function(e,t,n,a,i){if("_root_"==t.tag)return void r.create.nodes(e,t,n,a);if(!e)return void r.delalert.error("create miss vm");"slot"==t.utag&&(t=r.inject.use_inject_nodes_when_create(e,t,n)||t);var o=r.createcommon.calcommon(e,t,n);if(t.dir["el-hook"]&&0==t.dir["el-hook"].indexOf("node:")&&r.elhook(e,null,t.dir["el-hook"].substr(5),"beforeCreated",t),"_text_"==t.tag||"_exptext_"==t.tag&&!t.watchs)return"#document-fragment"==a.nodeName||a.id==e.id+"__tmp"?(s=document.createTextNode(t.text),void a.appendChild(s)):void(a.innerHTML=a.innerHTML+t.text);r.createcommon.idclass(e,t,n);var s;if(!(s="_exptext_"==t.tag?document.createElement("span"):document.createElement(t.tag)))return null;t.listid&&(s.listid=t.listid),t.id&&(s.id=t.id);for(var l in t.attr)"text"!=l&&"html"!=l&&s.setAttribute(l,t.attr[l]);return t.classList.length>0&&(r.web_private_style.check(e,t),s.className=t.classList.join(" ")),o?(a.appendChild(s),o.el=s,e.appendChild(o,t,1)):s&&(r.createcommon.event(e,t,n,s),"text"==t.tag?(s.textContent=t.text,t.childNodes=[]):t.attr.text?(s.textContent=t.attr.text,t.childNodes=[]):t.attr.html?(s.innerHTML=t.attr.html,t.childNodes=[]):t.text&&(s.textContent=t.text,t.childNodes=[]),void 0==i||i==a.childNodes.length?a.appendChild(s):a.insertBefore(s,a.childNodes[i]),t.dir["el-hook"]&&r.elhook(e,s,t.dir["el-hook"],"selfCreated"),t.childNodes&&t.childNodes.length>0&&!t.childskip_inject&&r.create.nodes(e,t,n,s),t.dir["el-hook"]&&r.elhook(e,s,t.dir["el-hook"],"childrenCreated")),s},e.exports.nodes=function(t,n,a,i,o,s){var l=s?[n]:n.childNodes||[];Array.isArray(l)||(l=[l]),0==l.length&&(l=[]);var d=0,c=[],p=-1;r.createblock.find_block(l,t,a,i);for(var f=0,u=l.length;f<u;f++)if(l[f].dir&&l[f].dir["el-filter"]){d=1;break}for(var f=0,u=l.length;f<u;f++){var n=l[f];if("if_result"!=f&&n.tag){if(n.$injectscope){if(n.$injectfromvm_sid){var h=r.gcache.vmsbysid[n.$injectfromvm_sid];if(!h){r.devalert("no inject_vm");continue}t=h}a=n.$injectscope}d&&(n.dir&&n.dir["el-filter"]?(r.calif.single(t,c,n.dir["el-filter"],f,a,p),"else"==n.dir["el-filter"]&&(p=f+1)):(c[f]=!0,p=f)),0!==d&&!0!==c[f]||(n.dir.list?r.list.gen(t,n,a,i):e.exports.create(t,n,a,i,o))}}}},function(e,t,n){var r=n(0);e.exports.find_block=function(e,t,n,a){e.forEach(function(a,i){var o=a.utag;if(r.gcache.use.block[o]||r.gcache.importblock_src[t[r.aprand].absrcid+":"+o]){var s=a.parentNode,l=a.id,d=r.gcache.use.block[o];if(d||(d=r.gcache.get_importblock(t,o)),!d)return;var c=[];for(var p in a.attr)-1==c.indexOf(p)&&c.push(p);for(var p in a.attrexp)-1==c.indexOf(p)&&c.push(p);c.forEach(function(e,i){var s=a.attr[e];!s&&a.attrexp&&(s=a.attrexp[e]),0==i&&-1==o.indexOf("-")&&!s&&a.childNodes.length>0&&(s=a.childNodes[0].text),s&&(s=r.calexp.exp(t,s,n),d=d.replace(new RegExp("\\$"+e,"g"),s))}),e[i]=r.calhtmltojson(d,0,0)[0].childNodes[0],e[i].parentNode=s,l&&(e[i].id=l),a.attr.style&&(e[i].attr.style=a.attr.style)}})}},function(e,t,n){function r(e){return e=""+e,e.charAt(0).toLowerCase()+e.slice(1)}var a=n(0);e.exports.idclass=function(e,t,n){if(t.id){if(t.id.indexOf("{")>-1&&(t.id=a.calexp.exp(e,t.id,n)),a.wap.config.strategy.not_document_getelbyid&&-1==t.id.indexOf("_elid_"+e.sid)){var r=a.cal.forece_calnodeid(e,t,n,"doc");t.oriid=t.id,t.id&&(e[a.aprand].newid_2_oldid[r]=t.id),t.id=r}e.__regel("id",t.oriid||t.id,t.id)}t.attr.role&&(t.id=t.id||a.cal.forece_calnodeid(e,t,n,"role"),e.__regel("role",t.attr.role,t.id,n.$index)),t.classList=t.classList||[];var i=t.classList.join(" ").replace(/  /g," ").replace(/^\s*|\s*$/g,"");if(t.classList=i?i.split(" "):[],t.classList.length>0)for(var o=t.classList.length-1;o>-1;o--)""===t.classList[o]&&t.classList.splice(o,1);t.classList.length>0&&(t.id=t.id||a.cal.forece_calnodeid(e,t,n,"class"),e.__regel("classList",t.classList,t.id,n.$index)),t.listid&&(t.id=t.id||a.cal.forece_calnodeid(e,t,n,"list"),e.__regel("listel",t.listid,t.id,n.$index))},e.exports.event=function(e,t,n,i){t.event&&a.tool.each(t.event,function(t,o){var s=r(o);e[a.aprand].domeventnames[s]=1,0==t.indexOf("js:")?(e[a.aprand].inline_onjs.push(t.substr(3)),t="inlinejs_on__"+(e[a.aprand].inline_onjs.length-1)):t=a.calexp.exp(e,t,n),a.elset(i,"on-"+s,t,n)})},e.exports.calcommon=function(e,t,n){var r=a.wap.config;if(!(r.precode.indexOf(t.utag)>-1)){var i;a.calexp.nodeattrexp(e,t,n),t.id&&"{"==t.id[0]&&(t.id=a.calexp.exp(e,t.id,n)),t.classList&&t.classList.length>0&&(t.classList.forEach(function(r,i){"{"==t.classList[i][0]&&(t.classList[i]=a.calexp.exp(e,r,n))}),t.classList=t.classList.join(" ").replace(/  /g," ").split(" ")),"_exptext_"==t.tag&&(t.text=a.calexp.exp(e,t.exp_text,n,"_exptext_")),t.watchs&&(t.id?t.id=a.calexp.exp(e,t.id,n):t.id=a.cal.forece_calnodeid(e,t,n,"watch"),a.watchcal.cal(e,t,n,"common"));var o=t.utag;return(o===r.vmtag||t.attr[r.vmtag+"-src"]||a.gcache.vmlib[o]||r.path.vm[o]||a.gcache.importvmsrc[e[a.aprand].absrcid+":"+o])&&("parent"!=t.id&&"child"!=t.id||(t.id=""),t.id||(t.id=a.define.newvmid()),t.childNodes=t.childNodes||[],t.attr=t.attr||{},t.childNodes.length>0&&a.inject.biaojiinject_in_calcommon(e,n,t.childNodes),i={src:a.gcache.importvmsrc[e[a.aprand].absrcid+":"+o]||r.path.vm[o]||t.attr[r.vmtag+"-src"]||t.attr.src||o,id:t.attr.id||t.id||a.define.newvmid()},a.gcache.vmlib[o]&&(i.src=o,i.absrc=o),t.childskip_inject=1),i}}},function(e,t,n){var r=n(0),a=10,i=0,o=function(e){this.id=e,this.__init()},s=o.prototype,l=["id","sid","src","absrc","pel","pvm"],d=["absrcid","pvmevent","pvmelevent","pvmnode"];s.__init=function(e){if(e||(this.sid=this.sid||++a,this.id=this.id||"id_auto_"+String(this.sid)),e){for(var t in this.event)"app."!=t.substr(0,4)||(this.event[t],0)||r.wap.unsub(t.substr(4),this,this.event[t]);for(var t in this)this.hasOwnProperty(t)&&(l.indexOf(t)>-1||t!==r.aprand&&(this[t]=null));for(var t in this[r.aprand])-1==d.indexOf(t)&&delete this[r.aprand][t]}e||(this[r.aprand]={},Object.defineProperty(this,r.aprand,{configurable:!1,enumerable:!1,writable:!1})),e||(this[r.aprand].pvmevent={},this[r.aprand].pvmelevent={},this[r.aprand].pvmnode=null),this[r.aprand].pvmslot={},this[r.aprand].has_started=0,this[r.aprand].has_defined=0,this[r.aprand].append_data={},this[r.aprand].append_option={},this[r.aprand].datafrom_store=[],this[r.aprand].datafrom_parent=[],this[r.aprand].cbs_on_define=[]},s.__clean_after_start=function(){delete this[r.aprand].pvmslot,delete this[r.aprand].append_data,delete this[r.aprand].append_option,delete this[r.aprand].has_started_self,delete this[r.aprand].has_defined,delete this[r.aprand].cbs_onstart,delete this[r.aprand].cbs_onshow,delete this[r.aprand].loadingsub_count,delete this[r.aprand].startcb_of_vmstart},s.__define=function(e){var t=this;"object"==typeof e&&null!==e||(e={}),e.sid&&delete e.sid,e.id&&delete e.id,e.src&&delete e.src,e.pel&&delete e.pel,e.ppel&&delete e.ppel;for(var n in e)void 0===s[n]&&(t[n]=e[n]);t.data=t.data||{},t.state=t.state||{},t.option=t.option||{},t.event=t.event||{},t.config=t.config||{},Array.isArray(t.config.cacheClasses)||(t.config.cacheClasses=[]),t.config.appendto="ppel"===t.config.appendto?"ppel":"pel";for(var n in t.event)"app."!=n.substr(0,4)||(t.event[n],0)||r.wap.sub(n.substr(4),this,t.event[n]);var a=this[r.aprand];return a.newid_2_oldid={},a.vmchildren={},a.rootscope={},a.nodejson=[],a.seed_of_el_aid=0,a.els_binded=[],a.els=[],a.elsdom={id:{},class:{},role:{},listel:{}},a.private_style={},a.domeventnames={},a.domeventnames_binded=[],a.cbs_onstart=[],a.cbs_onclose=[],a.cbs_onshow=[],a.loadingsub_count=0,a.has_defined=1,a.has_started=0,a.inline_onjs=[""],a.inline_watchjs=[""],a.watching_data={},a.watching_state={},a.watching_option={},a.watching_list={},this.__ensure_fn(),this},n(34).setproto(s),n(33).setproto(s),n(46).setproto(s),n(37).setproto(s),n(38).setproto(s),n(39).setproto(s),n(36).setproto(s),n(40).setproto(s),n(43).setproto(s),n(41).setproto(s),n(42).setproto(s),n(45).setproto(s),n(35).setproto(s),n(44).setproto(s),s.__setsrc=function(e){"string"!=typeof e&&(e=""),this.src=e||"",this.src&&(this.absrc=f.gen_path(this.src,this.pvm.absrc,!0),this[r.aprand].absrcid=r.gcache.geturlsid(this.absrc))};var c=n(32);s.batchdom=function(e,t){c.set(e,t)};for(var p in s)"_"==p[0]&&Object.defineProperty(s,p,{configurable:!1,enumerable:!1,writable:!1});var f=n(1),u=function(e){var t=new o(e.id);return e.el&&(t.pel=e.el),r.gcache.vmsbysid[t.sid]=t,e.pvm&&(r.gcache.vmparent[t.sid]=e.pvm.sid,t.pvm=e.pvm,t.pvm[r.aprand].vmchildren=t.pvm[r.aprand].vmchildren||{},t.pvm[r.aprand].vmchildren[t.id]=t),t.__setsrc(e.src),t};e.exports={vmclass:o,define:u,newvmid:function(){return"id_auto_"+ ++i},protect:function(){}},e.exports.extend=function(e,t){r.isfn(t)&&(s[e]=t)}},function(e,t,n){var r=n(0),a=function(e,t,n,a,i,o){var s=r.gcache.use.elhook[e]||(r.gcache.jslib[o]?r.gcache.jslib[o].exports:null);if(r.isfn(s))try{s.call({},t,n,a,i)}catch(t){r.devalert("el-hook."+e+":"+a,t)}};e.exports=function(e,t,n,i,o){var s=n;if(0==s.indexOf("this.")){var l=r.tool.objGetDeep(e,s.substr(5));if(r.isfn(l))try{l.call({},e,t,i,o)}catch(e){r.devalert("el-hook."+s+":"+i,e)}return void("childrenCreated"==i&&e.__addto_onshow(function(){l.call({},e,t,"attached",o)}))}if(r.gcache.use.elhook[s])return a(s,e,t,i,o),void("childrenCreated"==i&&e.__addto_onshow(function(){a(s,e,t,"attached",o)}));var d={loadvm:e,pvmpath:e.absrc,url:r.wap.config.path.elhook[s]||s,type:"lib",fresh:!1,from:"loadelhook",elhook_second_times:"childrenCreated"==i,refid:e[r.aprand].absrcid},c=e._is_fresh_ing;d.fresh=c,r.require.load(d,function(n,l,d){if(n)return void r.onerror("load_elhook_fail",d.id,e.absrc,n);r.isfn(l)&&(r.wap.config.path.elhook[s]?(r.gcache.use.elhook[s]=l,delete r.gcache.jslib[d.id],a(s,e,t,i,o)):a(s,e,t,i,o,d.id),"childrenCreated"==i&&e.__addto_onshow(function(){a(s,e,t,"attached",o,d.id)}))})}},function(e,t,n){var r=n(0);e.exports.get_owner=function(e){for(var t,n=e.target;;){if(n.hasAttribute("owner")){t=n.getAttribute("owner");break}if(n.hasAttribute("bindsidofvm"))break;if(!(n=n.parentNode)||!n.hasAttribute)break}return t},e.exports.stopEvent=function(e){e.stopPropagation()},e.exports.get_funcname=function(e,t){var n="",r="on-"+e.type,a=e.target;if(a.attributes[r+"-self"])n=a.attributes[r+"-self"].value;else if(a.attributes[r])n=a.attributes[r].value;else for(;;){if(a.attributes.isvmpel)break;if(a.attributes[r]){n=a.attributes[r].value;break}if(a.attributes.href){n="href:"+a.attributes.href.value;break}if(a.hasAttribute("bindsidofvm"))break;if(!(a=a.parentNode)||a==document||a==document.body)break}return n+""};var a=function(t,n){var a,i=n.pel,o=n.pvm;if(a=r.elget(i,"on-"+t.type),e.exports.stopEvent(t),a&&"parent"!=a||!n[r.aprand].pvmelevent[t.type]||(a=n[r.aprand].pvmelevent[t.type]),a){var s=r.getprefn(o,"domevent",a);s&&r.tryfn(o,s,[t],"vm.domevent")}};e.exports.all=function(t,n){var i=r.eventdom.get_funcname(t,n);if(Array.isArray(i)){i[1];i=i[0]}if("auto"==i){i=(n[r.aprand].newid_2_oldid[t.target.id]||t.target.id)+"."+t.type}if(!i||"parent"==i)return e.exports.stopEvent(t),void a(t,n);if(0===i.indexOf("href:"))return void e.exports.stopEvent(t);var o,s=n;if("js:"!=i.substr(0,3)&&"to:"!=i.substr(0,3)){var l=r.tool.parse_func_para(i);i=l[0],o=l[1]}var d=e.exports.get_owner(t);if(d&&"self"!=d&&(s="parent"==d?n.pvm:r.gcache.vmsbysid[d]),!s)return void e.exports.stopEvent(t);o=o||"";var c,c=r.getprefn(s,"domevent",i);if(r.isfn(c)||(c=r.gcache.use.domevent[i]),r.isfn(c)){var p=[t].concat(o.split(","));0==i.indexOf("inlinejs_on__")&&(p=[t,r.wap]),r.tryfn(s,c,p,"vm.domevent")}else if(0==i.indexOf("inlinejs_on__")){var f=parseInt(i.replace("inlinejs_on__",""));if(f>0){var c,u=n[r.aprand].inline_onjs[f];try{c=new Function("e,app",u),c.call(s,t,r.wap)}catch(e){e.funcname=u,r.onerror("inlinejs_fn_error",s.absrc,e),!1}r.isfn(c)?s[i]=c:s[i]=function(){},n[r.aprand].inline_onjs[f]=""}}else if("todata-"==i.substr(0,7)||"tostate-"==i.substr(0,8)){var h=t.target,v="check"==t.type?h.checked:"change"==t.type&&"on"!=h.value?h.value:void 0!=h.checked?h.checked:h.value;if("todata-"==i.substr(0,7)){i=i.substr(7).replace("this.data.","");var _=r.tool.objGetDeep(s.data,i);_!==v&&s.__autobind_setData(i,v,_)}else if("tostate-"==i.substr(0,8)){i=i.substr(8).replace("this.state.","");var _=r.tool.objGetDeep(s.state,i);_!==v&&s.__autobind_setstate(i,v,_)}!1}else r.tryfn(s,s.onerror,[t,"domevent"],"onerror"),r.devalert("no function,tvm.id=",s.id,"funcname="+i);e.exports.stopEvent(t)}},function(e,t,n){var r=n(0);e.exports.biaojiinject_in_calcommon=function(e,t,n){n.forEach(function(n,a){r.inject.biaojiinject_level_1(e,t,n.childNodes)})},e.exports.biaojiinject_level_1=function(e,t,n){n.forEach(function(n,r){n.$injectscope=t,n.$injectfromvm_sid=e.sid,n.attr=n.attr||{},n.attr.owner="parent"})},e.exports.inject_one_string=function(e,t,n,a,i){var o=typeof t[i][n],s=!0;if("undefined"==o)t[i][n]=a;else if("boolean"==o)t[i][n]=Boolean(a);else if("number"==o)t[i][n]=Number(a);else if("float"==o)t[i][n]=parseFloat(a);else if("string"==o)t[i][n]=String(a);else if("object"==o){if("string"==typeof a){var l,d=new Function("e","return   [ "+a+" ] ");try{l=d.call({},null)}catch(e){}l&&(a=l[0])}"object"==typeof a?Array.isArray(t[i][n])&&Array.isArray(a)?t[i][n]=a:Array.isArray(t[i][n])||Array.isArray(a)?s=!1:t[i][n]=a:s=!1}else t[i][n]=a;s&&-1===t[r.aprand].datafrom_parent.indexOf(n)&&t[r.aprand].datafrom_parent.push(n)},e.exports.cal_inject_node=function(e,t){var n=t,a={tag:"data",utag:"data",attr:{},attrexp:{},childNodes:[]},i={tag:"option",utag:"option",attr:{},attrexp:{},childNodes:[]},o=0,s=0;r.tool.each(n.attr,function(e,t){"id"!=t&&"style"!=t&&"role"!=t&&"event"!=t&&t!=r.wap.config.vmtag+"-src"&&(0===t.indexOf("data-")?(t=t.substr(5),o=1,0==e.indexOf("{")?a.attrexp[t]=e:a.attr[t]=e):0===t.indexOf("option-")&&(t=t.substr(7),s=1,"string"==typeof e&&0==e.indexOf("{")?i.attrexp[t]=e:i.attr[t]=e))}),1==o&&n.childNodes.push(a),1==s&&n.childNodes.push(i)},e.exports.inject_from_pvm_before_start=function(t){if(t[r.aprand].pvmnode){var n=t.pvm;r.tool.objClone(t[r.aprand].pvmnode).childNodes.forEach(function(a,i){if(r.isobj(a))if(a.attr=a.attr||{},"option"==a.utag||"data"==a.utag){if(t[a.utag]=t[a.utag]||{},a.attrexp)for(var o in a.attrexp)a.attr[o]=a.attrexp[o];for(var o in a.attr){var s=a.attr[o];if("string"==typeof a.attr[o]&&-1!=s.indexOf("this.")){var l=s.replace(/^\{*|\}*$/g,"").replace("this.",""),d=r.tool.objGetDeep(n,l);void 0==d&&(d=r.calexp.exp(n,s,n[r.aprand].rootscope,"_exptext_")),"object"==typeof d&&(d=r.tool.objClone(d)),e.exports.inject_one_string(n,t,o,d,a.utag)}else e.exports.inject_one_string(n,t,o,s,a.utag)}}else a.attr.slot?t[r.aprand].pvmslot[a.attr.slot]=a:(t[r.aprand].pvmslot[r.aprand]=t[r.aprand].pvmslot[r.aprand]||[],t[r.aprand].pvmslot[r.aprand].push(a))})}},e.exports.use_inject_nodes_when_create=function(t,n,a){n.attrexp=n.attrexp||{},a&&n.attrexp&&n.attrexp.name&&(n.attrexp.name=r.calexp.exp(t,n.attrexp.name,a));var i=n.parentNode,o=n.parentNode.childNodes,s=o.indexOf(n),l=a?n.attr.name||n.attrexp.name:"";if(a&&l){var d=t[r.aprand].pvmslot[l];if(d){if(-1!==s)return o.splice(s,1,d),o[s].parentNode=i,o[s];n.tag=d.tag,n.utag=d.utag,n.attr={};for(var c in d.attr)n.attr[c]=d.attr[c];n.childNodes=d.childNodes,e.exports.bind_vm_pvm_when_inject_node(t,d)}}else if(!a&&t[r.aprand].pvmslot[r.aprand]){var s=o.indexOf(n);-1==s&&(s=0),o.splice(s,1);for(var p=t[r.aprand].pvmslot[r.aprand],c=0;c<p.length;c++)p[c].attr.owner="parent",e.exports.bind_vm_pvm_when_inject_node(t,p[c]),o.splice(s+c,0,p[c]),p[c].parentNode=i}},e.exports.bind_vm_pvm_when_inject_node=function(t,n){if(n){if(n.event)for(var a in n.event)t[r.aprand].domeventnames[a]=1;if(n.childNodes&&n.childNodes.length>0)for(var i=0,o=n.childNodes.length;i<o;i++)e.exports.bind_vm_pvm_when_inject_node(t,n.childNodes[i])}}},function(e,t,n){var r=n(0);e.exports.gendata=function(e,t,n,a){var i=t.dir.list.split(" in ");i[1]=r.calexp.exp(e,i[1],n);var o=r.cal.now_path(n,i[1],e,"listgen");o=o.replace(/^\s*|\s*$/g,"").replace(/\[([\s\S]*?)\]/g,function(e,t){return"."+t+"."}).replace(/^\.*|\.*$/g,"").replace(/\'|\"/g,"");var s;return s=0===o.indexOf("this.")?r.tool.objGetDeep(e,o.substr(5)):r.tool.objGetDeep(e.data,o),[i,o,s]};var a=0,i=function(e){e.watchs&&(e.listid=++a),e.childNodes&&e.childNodes.forEach(function(e){i(e)})};e.exports.gen=function(t,n,a,o){n.id="";var s=e.exports.gendata(t,n,a,o),l=s[0],d=s[1],c=s[2];if(!Array.isArray(c))return void r.onerror("list_data_not_array",t.absrc,{path:d},c);i(n);var p={alias:l[0],palias:l[1],path:d,pscope:a};p.listdata=c,p.$index=0;var f,u={vm:t,node:n,scope:p};f=t[r.aprand].watching_list,f[d]=f[d]||[],f[d].push(u),u.pel=o,t.__addto_onstart(function(){"#document-fragment"==o.nodeName&&o.id==t.id+"__tmp"&&(u.pel=t.pel)}),u.sn_in_parent=o.childNodes.length;for(var h=0,v=c.length;h<v;h++)r.list.new_node(h,c[h],u,u.sn_in_parent+h,"init")},e.exports.$add=function(e,t,n){var a=r.list.get_fel_sn_in_parent(e,"add")+t;r.list.new_node(t,n,e,a,"add")},e.exports.$delat=function(e,t,n){var a=r.list.get_fel_sn_in_parent(e,"delat"),i=e.pel.childNodes;e.vm.delel(i[a+t])},e.exports.$clean=function(e){for(var t=r.list.get_fel_sn_in_parent(e,"clean"),n=this.length-1;n>-1;n--)e.vm.delel(e.pel.childNodes[t+n])},e.exports.$rebuild=function(e){for(var t=r.list.get_fel_sn_in_parent(e,"rebuild"),n=0,a=this.length;n<a;n++)r.list.new_node(n,this[n],e,t+n,"rebuild")},e.exports.new_node=function(e,t,n,a,i){var o=r.tool.objClone(n.node);delete o.dir.list,delete o.id,n.scope.$index=e,r.cal.nodeid(n.vm,o,n.scope),r.create.nodes(n.vm,o,n.scope,n.pel,a,!0)},e.exports.get_fel_sn_in_parent=function(e){return e.sn_in_parent}},function(e,t,n){var r=n(0);e.exports.load=function(e,t){if(!e[r.aprand].has_defined&&!e[r.aprand].has_started&&e.src){if(r.isfn(t)||(t=function(){}),r.gcache.vmlib[e.src])return r.gcache.add_vmlib_ref(e.src,e[r.aprand].absrcid,"loadsub"),e.__define(r.tool.objClone(r.gcache.vmlib[e.src].exports)),e.absrc=e.src,void e.__initdata_then_start(t);var n=e.pvm;n&&n[r.aprand].loadingsub_count++;var a=e._is_fresh_ing,i={loadvm:n,pvmpath:n.absrc,url:e.absrc||e.src,type:"vm",from:"loadvm",fresh:a,urlid:e[r.aprand].absrcid,refid:n[r.aprand].absrcid};r.require.load(i,function(a,i,o){if(a)r.onerror("load_vm_fail",o.id||e.src,a),n&&0==--n[r.aprand].loadingsub_count&&r.tryvmfn(n,null,"__onstart_a_zero_sub"),t.call(e,a);else{if(e.__define(i),e.absrc=o.id,e[r.aprand].cbs_on_define){for(var s in e[r.aprand].cbs_on_define)e[r.aprand].cbs_on_define[s]();e[r.aprand].cbs_on_define=[]}e.__initdata_then_start(t)}})}}},function(e,t,n){function r(e,t){if("function"!=typeof t&&(t=function(){}),"string"==typeof e&&(e={url:e}),!e.url)return void t({type:"missing both url and id"},null,e);if(!e.refid)return void t({type:"missing spec.refid"},null,e);if(e.urlid||(e.urlid=c.gcache.geturlsid(e.url)),p.cal_spec_path(e),e&&e.text)return e.callback=t,void a(i,"onload",e,"",null,!0);if((e.url==e.pvmpath||e.pvm&&e.url==e.pvm.absrc||e.id==e.pvmpath||e.pvm&&e.id==e.pvm.absrc)&&!e.istop)return void t(new Error("url duplicate"),null,e);if(0==e.url.indexOf("http://www.localhost.com/")){e.fresh=!0;var n=gcache.fileroot.get_text("mydevapps/"+e.url.replace("http://www.localhost.com/",""));return void l(e,n,t)}if(h[e.url])return void h[e.url].push([e,t]);if(e.elhook_second_times||!e.fresh){var r=u(e.id,"",e.type,"load",e.urlid);if(r)return void s(r,e,t)}var i,n="";i=new XMLHttpRequest,i.hascallbacked=0,h[e.url]=[[e,t]],i.onreadystatechange=function(t){4==i.readyState&&(0==i.status?a(i,"download_timeout",e,n):a(i,"readystatechange",e,n))},i.onload=function(){a(i,"onload",e,n)},i.onerror=function(t){c.devalert("onerror",i.location,t),a(i,"download_error",e,n,t)};try{i.open("GET",e.url,!0),e.fresh,i.send(null)}catch(e){i.onerror.call(i,"error-catched")}}function a(e,t,n,r,a,o){if(o)return void f.evalResponse(n,n.text,function(e,t){i(n,e,t)},d);if(1!=e.hascallbacked&&(e.hascallbacked=1,h[n.url])){n.url_goto=e.location;var s=0;"onload"==t?s=1:"readystatechange"==t&&(e.status<300&&e.status>=200||0===e.status&&!n.url.match(/^(?:https?|ftp):\/\//i)?s=1:(s=0,t="download_error"));var l=s>0?e.responseText:"",p=c.onload(n.url,e,n);p&&(l=p),0==s?i(n,{type:t,url:n.url,status:e.status,xhr:e}):1==s&&f.evalResponse(n,l,function(e,t){i(n,e,t)},d)}}function i(e,t,n){var r=[],a=[],i="";if(h[e.url]){for(var s=h[e.url].length,l=0;l<s;l++)r.push(h[e.url][l][1]),a.push(h[e.url][l][0]);i=h[e.url][0][0].type,delete h[e.url]}else r[0]=e.callback,a[0]=e,i=e.type;t?r.forEach(function(e,n){e(t,null,a[n])}):r.forEach(function(e,t){"css"==a[t].type?(c.gcache.add_importstyle_when_loadcb(a[t],n),e(null,n,a[t])):"block"==a[t].type?(a[t].importname?c.gcache.set_block_text_import(a[t].id,a[t].urlid,a[t].importname,n,a[t].refid):a[t].blockpathname&&c.gcache.add_block_inpath(a[t].blockpathname,n),e(null,n,a[t])):"text"==a[t].type?e(null,n,a[t]):(a[t].urlid&&("vm"==a[t].type&&c.gcache.add_vmlib_ref(a[t].id,a[t].refid,"loadok"),"lib"!=a[t].type&&"json"!=a[t].type||c.gcache.add_jslib_ref(a[t].id,a[t].refid,"loadok")),"text"==i&&"lib"==a[t].type?(a[t].text=n,c.require.load(a[t],e)):e(null,o(n,a[t]),a[t]))})}function o(e,t){return"css"==t.type?null:"lib"==t.type?e:"vm"==t.type?c.tool.objClone(e):"text"==t.type?e:null}function s(e,t,n){n(null,o(e,t),t)}function l(e,t,n){f.evalResponse(e,t,function(t,r){n(t,o(r,e),e)},d)}function d(e,t){Array.isArray(e)||(e=[e]);var n=e.length,a=[],i=[],o=[],s=0;e.forEach(function(l,d){if(!l)return void n--;r(l,function(r,d,c){r&&s++,a[e.indexOf(l)]=r,o[e.indexOf(l)]=c,i[e.indexOf(l)]=d||{},0==--n&&t(s,a,i,o)})})}var c=n(0),p=n(1),f=n(47),u=n(2),h={};void 0!==XMLHttpRequest&&"undefined"!=typeof XMLHttpRequest||(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")});e.exports={},e.exports.load=r,e.exports.loads=d,e.exports.normalizeUrl=p.normalizeUrl},function(e,t,n){var r=n(0);e.exports.setstore=function(e){(!e.store||"object"!=typeof e.store&&"function"!=typeof e.store)&&(e.store={}),r.isfn(e.store.init)||(e.store.init=function(e){e()}),r.isfn(e.store.vminit)||(e.store.vminit=function(e,t){t()}),r.isfn(e.store.get)||(e.store.get=function(e,t,n){n()}),r.isfn(e.store.set)||(e.store.set=function(e,t,n,r){r()}),r.isfn(e.store.add)||(e.store.add=function(e,t,n,r,a){a()}),r.isfn(e.store.del)||(e.store.del=function(e,t,n,r){r()})};var a={isdev:!1,precode:["pre","code"],vmtag:"vm",strategy:{not_document_getelbyid:!1,auto_deepclone_store_data:!0,force_close_error_close_tag:!0,force_close_not_match_close_tag:!0,append_to_pel_wait_loading_child_vm:!0,setChildState:!0,cacheClassesAll:!0},path:{lib:{},vm:{},block:{},elhook:{}}};e.exports.checkappconfig=function(e,t){e.config=e.config||{};var i=e.config;if(0==t){for(var o in a)if(Array.isArray(a[o])){i[o]=[];for(var s in a[o])i[o].push(a[o][s])}else if("object"==typeof a[o]){i[o]={};for(var s in a[o])i[o][s]=a[o][s]}else i[o]=a[o];i.precode_regexp={};for(var o in i.precode)i.precode_regexp[i.precode[o]]=new RegExp("<"+i.precode[o]+"([\\s\\S]*?)>([\\s\\S]*?)</"+i.precode[o]+">","gi")}else if(1==t){for(var o in i)void 0!==a[o]&&typeof a[o]!=typeof i[o]&&delete i[o];for(var o in a)void 0==i[o]&&(i[o]=r.tool.objClone(a[o]));for(var o in i.strategy)typeof a.strategy[o]!=typeof i.strategy[o]&&delete i.strategy[o];for(var o in a.strategy)void 0==i.strategy[o]&&(i.strategy[o]=a.strategy[o]);i.precode_regexp={};for(var o in i.precode)"string"!=typeof i.precode[o]&&delete i.precode[o];for(var o in i.precode)i.precode_regexp[i.precode[o]]=new RegExp("<"+i.precode[o]+"([\\s\\S]*?)>([\\s\\S]*?)</"+i.precode[o]+">","gi");i.block_regexp={};for(var o in i.path)"object"!=typeof i.path[o]&&delete i.path[o];for(var o in i.path.block)i.block_regexp[o]=new RegExp("<"+o+" ","gi");var l=n(1);for(var o in a.path){void 0==i.path[o]&&(i.path[o]={});for(var s in i.path[o])"string"!=typeof i.path[o][s]&&delete i.path[o][s],i.path[o][s]=l.gen_path(i.path[o][s],"",!0)}}}},function(e,t,n){var r=n(0),a=!1,i=!1,o="";e.exports.init=function(){a=!1,i=!1};var s=function(e,t,n){"function"!=typeof e.hookStart&&(e.hookStart=function(e){e()}),e.hookStart(function(){t.__initdata_then_start(n)})},l=function(e,t,n){s(e,t,n)},d=function(e,t,n,s,d){if(""!==o&&a){if(!0===o)return void s();var c={loadvm:null,pvmpath:"",url:t,type:"vm",from:"file_indexvm",text:o,urlid:1,refid:1};n[r.aprand].absrcid=1,r.require.load(c,function(t,a,o){if(t)r.devalert("load file_indexvm fail"),"function"==typeof s&&s("error");else for(var d in a)n[d]=a[d];n.absrc=o.id,i=!0,l(e,n,s)})}},c=function(e,t,n,i,s){if(n?e.loadfile("text",n,function(t,r){o=r,d(e,n,i,s)}):(o=!0,d(e,n,i,s)),t){var l={loadvm:null,pvmpath:"",url:t,type:"lib",from:"file_app",urlid:2,refid:2};r.require.load(l,function(t,o,l){t&&r.devalert("load app fail "),r.rootvmset.checkappconfig(e,1),r.rootvmset.setstore(e),a=!0,d(e,n,i,s)})}else r.rootvmset.checkappconfig(e,{}),r.rootvmset.setstore(e),a=!0,d(e,n,i,s)};e.exports.start_system=c,e.exports.start_index_vm=s},function(e,t,n){var r=n(0),a={},i={},o=function(){r.wap.indexvm[r.aprand].has_started=1;var e=Object.keys(r.wap.config.path.vm);e.push(r.wap.config.vmtag);var t=document.body.querySelectorAll(e.join(",")),n=[];[].forEach.call(t,function(e){n.push(e)}),[].forEach.call(n,function(e){if(!e.hasAttribute("autostart")||0!=e.getAttribute("autostart")){var t={};t.src=r.wap.config.path.vm[e.localName]||e.getAttribute("src")||"",t.id=e.getAttribute("id")||"";e.childNodes.forEach(function(t){e.removeChild(t)});var n=r.define.define({pvm:r.wap.indexvm,el:e,id:t.id,src:t.src});r.loadsubvm.load(n,function(e){})}})},s=function(){for(var t,n,s=document.getElementsByTagName("script"),l=s.length-1;l>-1;l-=1)if("vmix"===s[l].dataset.role&&(s[l].hasAttribute("app-file")||s[l].hasAttribute("index-file"))){n=s[l].getAttribute("index-file"),t=s[l].getAttribute("app-file");break}e.exports.root=a,i=r.define.define({id:"__index__",pvm:null}),i.__define({}),i[r.aprand].pvmevent={},i.pel=document.body,e.exports.index=i,r.wap.indexvm=i,i.absrc=window.location.pathname;var d=window.location.pathname;d=d.substr(0,d.lastIndexOf("/")),window.location.dirpath=d;var c=window.location.protocol+"//"+window.location.hostname;window.location.port&&80!==window.location.port&&(c+=":"+window.location.port),window.location.fullhost=c,r.rootvmstart.init(),r.rootvmstart.start_system(r.wap,t,n,i,function(){n||o()})};e.exports.start_system=s},function(e,t,n){var r=n(0);e.exports.web=function(e){!e.pel.style.display&&e.config.pelDisplayType&&(e.pel.style.display=e.config.pelDisplayType);var t=document.createDocumentFragment();t.id=e.id+"__tmp",e.__top_fragment=t,r.create.nodes(e,e[r.aprand].nodejson[0],e[r.aprand].rootscope,t)},e.exports.mob=function(e){e.pel.bubbleParent=!1;var t=core.mod.device.getOrient(),n={layout:e.pel.layout,width:e.pel.width,height:e.pel.height};e.now_orient=t,core.style.api.cal_all_node(e,t,n,e[r.aprand].nodejson[0].childNodes);var a=Ti.UI.createView({layout:"vertical"});e.__top_fragment=a,r.create.nodes(e,e[r.aprand].nodejson[0],e[r.aprand].rootscope,a);var t=core.vmmob.orient.orient_where(e);e[r.aprand].orient_last=t}},function(e,t,n){var r=n(0),a={};a.objGetDeep=function(e,t){if(void 0==e)return e;if("object"==typeof e&&"string"==typeof t){t=t.replace(/^\s*|\s*$/g,"").replace(/\[([\s\S]*?)\]/g,function(e,t){return"."+t+"."}).replace(/^\.*|\.*$/g,"").replace(/\'|\"/g,"");for(var n=e,r=~t.indexOf(".")?t.split("."):[t],a=0;a<r.length&&void 0!==(n=n[r[a]]);a++);return n}},a.objSetDeep=function(e,t,n,r){if(!e||"object"!=typeof e||"string"!=typeof t)return!1;if(-1==t.indexOf("."))(r||void 0!=e[t])&&(e[t]=n);else{var a=t.split("."),i=a.length,o=0,s=[];s[0]=e;for(var l=1;l<i;l++)if(Array.isArray(s[l-1])&&(a[l-1]=parseInt(a[l-1])),r&&void 0==s[l-1][a[l-1]]&&(s[l-1][a[l-1]]={}),s[l]=s[l-1][a[l-1]],"object"!=typeof s[l]||null===s[l]){o=1;break}o||(s[i-1][a[i-1]]=n)}},a.deepmerge=function(e,t){if("object"==typeof e&&"object"==typeof t&&(Array.isArray(t)||!Array.isArray(e))&&(!Array.isArray(t)||Array.isArray(e)))for(var n in t)void 0===e[n]?r.isobj(t[n])?e[n]=a.objClone(t[n]):e[n]=t[n]:r.isobj(t[n])?Array.isArray(t[n])?(e[n]=[],t[n].forEach(function(t,r){"object"==typeof t?(e[n][r]={},a.deepmerge(e[n][r],t)):e[n][r]=t})):a.deepmerge(e[n],t[n]):e[n]=t[n]},a.deepmerge_notreplace=function(e,t){if("object"==typeof e&&"object"==typeof t)for(var n in t)void 0==e[n]?r.isobj(t[n])?e[n]=a.objClone(t[n]):e[n]=t[n]:r.isobj(e[n])&&r.isobj(t[n])&&a.deepmerge_notreplace(e[n],t[n])},a.trim=function(e){return e.replace(/^\s*|\s*$/g,"")},a.trimquota=function(e){return e.replace(/^[\'\"]*|[\'\"]*$/g,"")},a.parse_func_para=function(e){var t=[e,void 0];return e.replace(/(.*?)\((.*?)\)(.*?)/g,function(e,n,r){t[0]=a.trim(n),t[1]=a.trim(r)}),t},a.parse_kv_para=function(e){var t={},n=e.split(";");1==n.length&&(n=e.split(","));for(var r=0,a=n.length;r<a;r++)n[r].replace(/(.+)=(.+)/g,function(e,n,r){t[n]=r});return t},a.objClone=function(e,t){if(!e)return e;if(e instanceof r.define.vmclass)return e;if("object"!=typeof e){return e}if(void 0!==e.nodeType||void 0!==e.nodeName)return e;var n;if(Array.isArray(e)){n=new Array(e.length);for(var i=0,o=e.length;i<o;i++)"object"==typeof e[i]?n[i]=a.objClone(e[i],t):n[i]=e[i]}else{n=e.constructor==Object?new e.constructor:new e.constructor(e.valueOf());for(var s in e)e.hasOwnProperty(s)&&n[s]!==e[s]&&(e[s]?"parentNode"==s&&e[s].tag?n[s]=e[s]:"object"==typeof e[s]?void 0!==e[s].nodeType||void 0!==e[s].nodeName?n[s]=e[s]:n[s]=a.objClone(e[s]):n[s]=e[s]:n[s]=e[s])}return t&&(n.toString=e.toString,n.valueOf=e.valueOf),n},a.multiline=function(e){if("function"!=typeof e)throw new TypeError("Expected a function.");var t=/\/\*!?(?:\@preserve)?[ \t]*(?:\r\n|\n)([\s\S]*?)(?:\r\n|\n)\s*\*\//.exec(e.toString());if(!t)throw new TypeError("Multiline comment missing.");return t[1]=t[1].replace(/\/\/.*?[\r\n]/g,""),t[1].replace(/\/\/.*?[\r\n]/g,"").replace(/\/\/.*?$/g,"")},a.each=function(e,t,n){if(null!=e&&e.length===+e.length)for(var r=0;r<e.length;r++)t.call(n,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(n,e[a],a,e)};var i={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&#x27;":"'","&#x2f;":"/"},s=function(e){return i[e]},l=function(e){return o[e]};a.htmlescape=function(e){return"string"!=typeof e?e:e.replace(/[&<>"]/gim,s)},a.htmlunescape=function(e){return"string"!=typeof e?e:e.replace(/(&lt;|&gt;|&amp;|&quot;|&#x27;|&#x2f;)/gim,l)},e.exports=a},function(e,t,n){var r=n(0),a=function(e,t,n){for(var r=e.length,a=r-1;a>-1;a--)e[a].listid&&e[a].listid==t&&e[a].$index==n&&e.splice(a,1)},i=function(e,t,n,i){if(t.watchs)for(var o=t.watchs,s=0,l=o.length;s<l;s++){var d=o[s][0],c=o[s][1];0!==c.indexOf("js:")&&"{"==c[0]&&(c=r.calexp.exp(e,c,n)),t.id=t.id||r.cal.forece_calnodeid(e,t,n,"watch");var p={vm:e,node:t,elid:t.id,scope:n,action:"prop",$index:n.$index};t.listid&&(p.listid=t.listid);if(0==c.indexOf("js:"))e[r.aprand].inline_watchjs.push(c.substr(3)),p.watchfunc="inlinejs_watch__"+(e[r.aprand].inline_watchjs.length-1),p.watchpara=null;else if(c.indexOf("-toel-")>0){var f=c.split("-toel-");p.toelattr=f[1];var u=r.tool.parse_func_para(f[0]);p.watchfunc=u[0],p.watchpara=u[1]}else if("toel-"==c.substr(0,5))p.toelattr=c.substr(5);else{var u=r.tool.parse_func_para(c);p.watchfunc=u[0],p.watchpara=u[1]}var h=r.cal.now_path(n,d,e,"watch_path");h.substr(h.lastIndexOf(".")+1);if("["==h[0]&&"]"==h[h.length-1]&&(h=h.substr(1,h.length-2)),h=h.replace(/\[/g,".").replace(/\]/g,""),"."==h[0]&&(h=h.substr(1)),"noel"==i&&(p.elid=-2),h.indexOf(".-1")>-1)alert("watch_path.indexOf('.-1')>-1");else{var v=e.data,_="data";0==h.indexOf("this.data.")?(h=h.substr(10),v=e.data||{},_="data"):0==h.indexOf("this.state.")?(h=h.substr(11),v=e.state||{},_="state"):0==h.indexOf("this.option.")&&(h=h.substr(12),v=e.option||{},_="option");var m=r.tool.objGetDeep(v,h);p.watchfunc&&p.watchfunc&&"_exptext_"!==p.node.tag&&e.__addto_onshow(function(){r.watchcb.watch(p,h,"",m)});var g=e[r.aprand]["watching_"+_];g&&(g[h]=g[h]||[],void 0!==n.$index&&a(g[h],p.listid,p.$index),g[h].push(p))}}};e.exports={cal:i}},function(t,n,r){var a=r(0);t.exports.watch=function(t,n,r,i){if("object"==typeof t){var o,s=t.vm;if(t.el?o=t.el:!(o=document.getElementById(t.elid))&&a.wap.config.strategy.not_document_getelbyid&&-1==t.elid.indexOf("_elid_")&&(o=s.getel("#"+t.elid)),!o)return a.devalert("没有el",t.elid,n),void s.__delel_watchcb_notfind(t.elid);var l=i,d=t.toelattr;if(t.watchfunc){var c;c={el:o,path:n,oldv:r,newv:i};var l,p=t.watchfunc,f=a.getprefn(s,"dataevent",p);if(a.isfn(f))try{l=0==p.indexOf("inlinejs_watch__")?f.call(s,c,t.watchpara,a.wap):f.call(s,c,t.watchpara)}catch(e){a.devalert("dataevent error",e)}else if(0==p.indexOf("inlinejs_watch__")){var u=parseInt(p.replace("inlinejs_watch__",""));if(u>0){var h=s[a.aprand].inline_watchjs[u];try{var f=new Function("e,para,app",h);l=f.call(s,c,t.watchpara,a.wap),s[p]=f}catch(t){s[p]=function(){},a.devalert("dataevent error",e)}s[a.aprand].inline_watchjs[u]=""}}}else t.vm.__reset_list_index(t),l="_exptext_"==t.node.tag||"_exptext_"==t.node.utag?a.calexp.exp(t.vm,t.node.exp_text,t.scope,"_exptext_"):t.node.attrexp&&t.node.attrexp[d]?a.calexp.exp(t.vm,t.node.attrexp[d],t.scope,"_exptext_2"):i;d&&void 0!==l&&s.batchdom(function(){a.watchcb.setweb(o,d,l,t,n)})}},t.exports.setweb=function(e,t,n,r,i){if("html"==t?t="innerHTML":"class"==t&&(t="className"),a.isfn(a.gcache.use.dataevent[t]))a.gcache.use.dataevent[t](e,n,r,i);else if("innerHTML"==t||"html"==t)e.innerHTML=n;else if("text"==t)void 0!=e.textContent?e.textContent=n:void 0!=e.text?e.text=n:void 0!=e.innerText&&(e.innerText=n);else if("value"==t||"className"==t)e[t]=n;else if("checked"==t||"disabled"==t)e[t]=n+""=="true";else{var o=t.split("-");1==o.length&&(o=t.split(".")),1==o.length?e[o[0]]=n:2==o.length&&("attr"==o[0]?e.setAttribute(o[1],n):"data"==o[0]?e.dataset[o[1]]=n:"style"==o[0]?e.style[o[1]]=n:a.tool.objSetDeep(e,o.join("."),n,!1))}},t.exports.setmob=function(e,t,n,r,a){if(e=e||e)if("Input"==e.ctag&&1==e._input&&"checked"==t)e.set_checked(n);else{"Button"==e.ctag&&"text"==t&&(t="title"),"Button"==e.ctag&&"title"==t&&(n=""+n);var i=t.split("-");1==i.length&&(i=t.split(".")),1==i.length?e[i[0]]=n:2==i.length&&("font"==i[0]&&void 0!==e.font[i[1]]&&(e.font[i[1]]=n),e[i[1]]=n)}}},function(e,t){var n=[],r=!1,a=!1,i=function(){if(!r){r=!0;for(var e=0;e<n.length;e++)n[e].fn.call(window,n[e].ctx);n=[]}},o=function(){"complete"===document.readyState&&i()};e.exports.docReady=function(e,t){if(r)return void setTimeout(function(){e(t)},1);n.push({fn:e,ctx:t}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(i,1):a||(document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):(document.attachEvent("onreadystatechange",o),window.attachEvent("onload",i)),a=!0)}},function(e,t,n){var r=n(0),a=1;e.exports.add=function(e,t){var n=e.sid,i=e[r.aprand].private_style;t=t.replace(/\.\s{0,}([-\w]+){/g,function(e,t,n){return i[t]=i[t]||"priv_"+a++,"."+i[t]+"{"}),t=t.replace(/\.\s{0,}([-\w]+)\s{1,}/g,function(e,t,n){return i[t]=i[t]||"priv_"+a++,"."+i[t]+" "});var o=document.getElementById("_privatestyle_"+n);if(o)o.textContent+="\n"+t;else{var o=document.createElement("style");o.type="text/css",o.id="_privatestyle_"+n,o.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(o)}},e.exports.get=function(e,t){var n=e[r.aprand].private_style;return n?n[t]||"":""},e.exports.check=function(e,t){var n=e[r.aprand].private_style;n&&t.classList.forEach(function(e,r){n[e]&&(t.classList[r]=n[e])})}},function(e,t,n){var r=n(0);r.aprand="vm"+(new Date).getTime().toString(),r.define=n(13),r.loadsubvm=n(18),r.start=n(23),r.elhook=n(14),r.inject=n(16),r.calhtmltojson=n(8),r.cal=n(6),r.calexp=n(7),r.calif=n(9),r.watchcal=n(25),r.watchcb=n(26),r.create=n(10),r.createcommon=n(12),r.createblock=n(11),r.list=n(17),r.eventdom=n(15),r.tool=n(24),r.require=n(19),r.rootvmset=n(20),r.rootvmstart=n(21),r.web=n(22),r.webdocready=n(27),r.web_private_style=n(28),n(3),r.cacheclass=n(5),r.gcache=new r.cacheclass,r.appclass=n(4),r.wap=new r.appclass,r.wap.blankvm=r.define.define({id:"_blankforapp_"}),r.wap.blankvm.__define({name:"_blank_"}),e.exports={vmix:{email:"peterli888@gmail.com"}},r.webdocready.docReady(r.web.start_system)},function(e,t,n){n(0);e.exports.setproto=function(e){e.check=function(e,t,n){var r="vm"==e&&this.get_vmlib(t)||("lib"==e||"json"==e)&&this.get_jslib(t)||"css"==e&&this.importstyle[t]||"block"==e&&this.importblock_txt[t];return r&&-1===r.refids.indexOf(n)&&r.refids.push(n),!!r},e.add_jslib_ref=function(e,t,n){var r=this.jslib[e];r&&r.refids&&-1===r.refids.indexOf(t)&&r.refids.push(t)},e.newjslib=function(e,t,n){this.jslib[e]=t,n&&(t.refids=[n]),this.check_if_lib_inpath(e)},e.get_jslib=function(e){return this.jslib[e]}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.geturlsid=function(e){return this.urlid[e]||(this.urlid[e]=this.urlsid++),this.idtourl[this.urlid[e]]=e,this.urlid[e]},e.newvmlib=function(e,t,n){t.refids=[n],this.vmlib[e]=t,this.check_if_vm_inpath(e)},e.get_vmlib=function(e){return this.vmlib[e]},e.add_vmlib_ref=function(e,t,n){var r=this.vmlib[e];r&&Array.isArray(r.refids)&&-1===r.refids.indexOf(t)&&r.refids.push(t)},e.newvmbody=function(e,t){this.vmbody[e]=t||""},e.get_body_extend=function(e){return this.vmbody[e]||""},e.get_body=function(e){return this.vmbody[e.absrc]||""},e.add_vmstyle_inline=function(e,t){this.vmstyle[e]=r.tool.trim(t)},e.get_vmstyle_extend=function(e){return this.vmstyle[e]||""},e.get_vmstyle=function(e){var t=this.vmstyle[e.absrc]||"";for(var n in this.importstyle)this.importstyle[n].refids.indexOf(e[r.aprand].absrcid)>-1&&(t+=this.importstyle[n].text);return t},e.add_importstyle_when_loadcb=function(e,t){this.importstyle[e.id]={text:t||""},this.importstyle[e.id].refids=[e.refid]},e.add_vm_src_import=function(e,t,n){this.importvmsrc[e+":"+t]=n},e.add_block_src_import=function(e,t,n){this.importblock_src[e+":"+t]=n},e.set_block_text_import=function(e,t,n,r,a){this.importblock_src[a+":"+n]=e,this.importblock_txt[e]={text:r||""};var i=this.importblock_txt[e];i.refids=i.refids||[],-1===i.refids.indexOf(a)&&i.refids.push(a)},e.add_block_inpath=function(e,t){this.use.block[e]=t},e.get_importblock=function(e,t){var n=r.gcache.importblock_src[e[r.aprand].absrcid+":"+t];if(!n)return"";var a=r.gcache.importblock_txt[n];return a?(-1===a.refids.indexOf(e[r.aprand].absrcid)&&a.refids.push(e[r.aprand].absrcid),a.text||""):""}}},function(e,t,n){function r(e){for(var t;t=e.shift();)t()}function a(){var e;try{r(l),r(d)}catch(t){e=t}c=!1,(l.length||d.length)&&i(),e&&o("task errored",e.message)}function i(){c||(c=!0,s(a))}var o=(n(0),console.log.bind(console,"[fastdom]")),s=(window,function(e){return setTimeout(e,16)}),l=[],d=[],c=!1,p=function(e,t){var n=t?e.bind(t):e;return l.push(n),i(),n},f=function(e,t){var n=t?e.bind(t):e;return d.push(n),i(),n};e.exports={get:p,set:f}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.cleanList=function(e){if(Array.isArray(this[r.aprand].watching_list[e])){var t=this.__getData(e);this[r.aprand].watching_list[e].forEach(function(e){r.list.$clean.call(t,e)})}},e.rebuildList=function(e){if(Array.isArray(this[r.aprand].watching_list[e])){var t=this.__getData(e);this[r.aprand].watching_list[e].forEach(function(e){r.list.$rebuild.call(t,e)})}},e.__blankfn=function(){},e.__getrandobj=function(){return this[r.aprand]},e.__reset_list_index=function(e){void 0!==e.$index&&e.scope&&void 0!==e.scope.$index&&(e.scope.$index=e.$index)},e.getClassName=function(e){return r.web_private_style.get(this,e)},e.hasSlot=function(e){return!!this[r.aprand].pvmslot[e]},e.__ensure_fn=function(){}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.hasChild=function(e){return!!this[r.aprand].vmchildren[e+""]},e.getChild=function(e){if(this[r.aprand].vmchildren[e])return this[r.aprand].vmchildren[e];if(e.indexOf(".")>-1){for(var t=this,n=~e.indexOf(".")?e.split("."):[e],a=0;a<n.length&&void 0!==(t=t[r.aprand].vmchildren[n[a]]);a++);return t}},e.getParent=function(){return this.pvm},e.removeChild=function(e){var t;e instanceof r.define.vmclass&&this.sid===e.pvm.sid?this[r.aprand].vmchildren[e.id]&&this[r.aprand].vmchildren[e.id].sid==e.sid&&(t=e):r.isstr(e)&&(t=this.getChild(e)),t&&(t.__vmclose(),r.gcache.removesid(t.sid),delete this[r.aprand].vmchildren[e])},e.appendChild=function(e,t,n){if(!e.id||this.hasChild(e.id))return void r.devalert("loadsub 缺少id或者重复",e.id);if(e.el&&r.isfn(e.el.appendChild)){e.src||(e.path?e.src=r.wap.config.path.vm[e.path]:e.tagname&&(e.src=e.tagname)),e.src;var a=r.define.define({pvm:this,el:e.el,id:e.id,src:e.src});if(1==n)t&&t.tag&&(r.inject.cal_inject_node(a,t),a[r.aprand].pvmevent=t.vmevent||{},a[r.aprand].pvmelevent=t.event||{},a[r.aprand].pvmnode=t,0!=t.attr.autostart&&(a._is_fresh_ing=this._is_fresh_ing,r.loadsubvm.load(a)));else if(e){var i=a[r.aprand].pvmnode?a[r.aprand].pvmnode.childNodes:[];if(r.isobj(e.event)&&(a[r.aprand].pvmevent=e.event),r.isobj(e.data)){r.tool.deepmerge(a[r.aprand].append_data,e.data);for(var o in e.data)-1===a[r.aprand].datafrom_parent.indexOf(o)&&a[r.aprand].datafrom_parent.push(o);for(var s=i.length-1;s>-1;s--)"data"==i[s].tag&&i.splice(s,1)}if(r.isobj(e.option)){r.tool.deepmerge(a[r.aprand].append_option,e.option);for(var s=i.length-1;s>-1;s--)"option"==i[s].tag&&i.splice(s,1)}return a}}}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.__addto_onclose=function(e){this[r.aprand].cbs_onclose.push(e)},e.__vmclose=function(){if(this[r.aprand].has_started){var e=this;this[r.aprand].has_started=0;for(var t in this[r.aprand].cbs_onclose)this[r.aprand].cbs_onclose[t].call(this);var n=e.pel;n.setAttribute("bindsidofvm",0),n.setAttribute("isvmpel",!1);var a=this.pvm;if(a&&r.tryvmfn(a,this,"beforechildclose"),r.tryvmfn(e,null,"beforeclose"),e[r.aprand].vmchildren)for(var t in e[r.aprand].vmchildren)e[r.aprand].vmchildren[t].__vmclose();if(this.__unbindall(),"ppel"!==e.config.appendto)for(var i=e[r.aprand].els,o=i.length-1;o>-1;o--)i[o].parentNode===e.pel?e.pel.removeChild(i[o]):(i[o].replaced_pel&&i[o].replaced_pel.parentNode&&i[o].replaced_pel.parentNode.removeChild(i[o].replaced_pel),i[o].parentNode&&i[o].parentNode.removeChild(i[o]));else{var s=e.ppel,l=e.pel;s&&l&&s.replaceChild(l,e[r.aprand].els[0])}r.tryvmfn(e,null,"onclose"),a&&r.tryvmfn(a,this,"onchildclose");var d=document.getElementById("_privatestyle_"+e.sid);d&&document.getElementsByTagName("head")[0].removeChild(d),e.__init(!0),this[r.aprand].has_started=0,this[r.aprand].has_defined=0}},e.clean=function(e){1!==this[r.aprand].has_started&&r.gcache.clean_when_vm_close(this)},e.close=e.__vmclose}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.setChildData=function(e,t,n,a){r.isfn(a)||(a=this.__blankfn),"object"==typeof e&&(e=e.id);var i=this.getChild(e);if(!i)return void a(!1);if(!i[r.aprand].has_started){r.tool.objSetDeep(i[r.aprand].append_data,t,n,!0);var o=t.split(".")[0];return void(-1===i[r.aprand].datafrom_parent.indexOf(o)&&i[r.aprand].datafrom_parent.push(o))}var s=i.__getData(t);if(s===n)return void a(!1);var l=t.split(".")[0];if(-1==i[r.aprand].datafrom_parent.indexOf(l))return void a(!1,"datasource not match");i.__confirm_set_data_to_el(i,t,n,s),a(!0,null);var d=i.event["pvm.setdata"];r.isfn(d)&&d.call(i,{path:t,oldv:s,newv:n})},e.addChildData=function(e,t,n,a,i){r.isfn(i)||(i=this.__blankfn),"object"==typeof e&&(e=e.id);var o=this.getChild(e);if(!o)return void i(!1);var s=t.split(".")[0];if(-1==o[r.aprand].datafrom_parent.indexOf(s))return void i(!1,"datasource not match");o.__confirm_add_data_to_el(o,t,n,a,function(e){i(e)});var l=o.event["pvm.adddata"];r.isfn(l)&&l.call(o,{path:t,index:n,value:a})},e.delChildData=function(e,t,n,a,i){r.isfn(i)||(i=this.__blankfn),"object"==typeof e&&(e=e.id);var o=this.getChild(e);if(!o)return void i(!1);var s=t.split(".")[0];if(-1==o[r.aprand].datafrom_parent.indexOf(s))return void i(!1,"datasource not match");o.__confirm_del_data_to_el(o,t,n,a,function(e){i(e)});var l=o.event["pvm.deldata"];r.isfn(l)&&l.call(o,{path:t,index:n,count:a})}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.__setData=function(e,t){r.tool.objSetDeep(this.data,e,t)},e.__getData=function(e){return r.tool.objGetDeep(this.data,e)};var t=function(e,t){var n=t.split(".")[0];return e[r.aprand].datafrom_parent.indexOf(n)>-1?"parent":e[r.aprand].datafrom_store.indexOf(n)>-1?"store":"self"};e.__autobind_setData=function(e,t,n){this.setData(e,t)},e.getData=function(e,n){if(e&&r.isfn(n)){var a=this,i=t(a,e);if("self"==i)n(null,null,i);else if("store"==i)r.wap.store.get.call(r.wap,a,e,function(e,t){n(e,t,i)});else if("parent"==i){var o=a.pvm.dataProxy;o&&(o=o.get),r.isfn(o)?o.call(a.pvm,a,e,function(e,t){n(e,t,i)}):n(null)}}},e.setData=function(e,n,a){var i=this;if(r.isfn(a)||(a=i.__blankfn),!e||void 0==n)return a(!1);var o=i.__getData(e);if(o===n)return a(!1);var s=t(i,e);if("self"==s)i.__confirm_set_data_to_el(i,e,n,o,a),a(!0,null,s);else if("store"==s)r.wap.store.set.call(r.wap,i,e,n,function(t,r){t&&i.__confirm_set_data_to_el(i,e,n,o,a),a(t,r,s)});else if("parent"==s){var l=i.pvm.dataProxy;l&&(l=l.set),r.isfn(l)?l.call(i.pvm,i,e,n,function(t,r){t&&i.__confirm_set_data_to_el(i,e,n,o,a),a(t,r,s)}):a(!1,null,s)}else a(!1,"datasource not match",s)},e.addData=function(e,n,a,i){var o=this;if(r.isfn(i)||(i=o.__blankfn),!e||void 0==a)return i(!1);var s=t(o,e);if("self"==s)o.__confirm_add_data_to_el(o,e,n,a,i);else if("store"==s)r.wap.store.add.call(r.wap,o,e,n,a,function(t,r){t?o.__confirm_add_data_to_el(o,e,n,a,i):i(t,r,s)});else if("parent"==s){var l=o.pvm.dataProxy;l&&(l=l.add),r.isfn(l)?l.call(o.pvm,o,e,n,a,function(t,r){t?o.__confirm_add_data_to_el(o,e,n,a,i):i(t,r,s)}):i(!1,null,s)}else i(!1,"datasource not match",s)},e.delData=function(e,n,a,i){var o=this;if(r.isfn(i)||(i=o.__blankfn),!e)return i(!1);if(parseInt(n)===n){a||(a=1);var s=t(o,e);if("self"==s)o.__confirm_del_data_to_el(o,e,n,a,i);else if("store"==s)r.wap.store.del.call(r.wap,o,e,n,a,function(t,r){t?o.__confirm_del_data_to_el(o,e,n,a,i):i(t,r,s)});else if("parent"==s){var l=o.pvm.dataProxy;l&&(l=l.del),r.isfn(l)?l.call(o.pvm,o,e,n,a,function(t,r){t?o.__confirm_del_data_to_el(o,e,n,a,i):i(t,r,s)}):i(!1,null,s)}else i(!1,"datasource not match",s)}}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.setChildOption=function(e,t,n,a){r.isfn(a)||(a=this.__blankfn);var i=this.getChild(e);if(!i)return a(!1);if(!i[r.aprand].has_started)return void r.tool.objSetDeep(i[r.aprand].append_option,t,n,!0);var o=r.tool.objGetDeep(i.option,t);if(o===n)return a(!1);var s=i[r.aprand].watching_option[t];if(Array.isArray(s)){s.forEach(function(e){r.tool.objSetDeep(i.option,t,n),r.watchcb.watch(e,t,o,n)});var l=i.event["pvm.setoption"];r.isfn(l)&&l.call(i,{path:t,newv:n,oldv:o})}else a(!1)}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){var t=function(e,t,n,a){r.tool.objSetDeep(e.state,t,n);var i=e[r.aprand].watching_state[t];if(Array.isArray(i)){i.length;i.forEach(function(e,i){r.watchcb.watch(e,t,a,n)})}};e.setState=function(e,n,a){var i=r.tool.objGetDeep(this.state,e);void 0!==e&&i!==n&&(t(this,e,n,i),r.isfn(a)||(a=this.__blankfn),this.pubup("state",{path:e,newv:n,oldv:i},a))},e.__autobind_setstate=function(e,t,n){this.setState(e,t)}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.__confirm_set_data_to_el=function(e,t,n,a){if(void 0==a&&(a=e.__getData(t)),a!==n){e.__setData(t,n);var i=t.split("."),o=i.length;if(i[o-1]==parseInt(i[o-1])){t.substr(0,t.lastIndexOf("."))}var s=e[r.aprand].watching_data[t]||e[r.aprand].watching_data["this.data."+t];if(Array.isArray(s)){s.forEach(function(i,s){if(i.listid){for(var l=t.split("."),d="",c=0;c<o&&(0==c?d=l[0]:d+="."+l[c],!Array.isArray(e[r.aprand].watching_list[d]));c++);if(""==d)return;var p=e.__getData(d);if(!Array.isArray(p))return;for(var f,c=0;c<o;c++)if(parseInt(l[c])==l[c]){f=parseInt(l[c]);break}f>-1&&(l.splice(0,c+1),l.join(".")),i.el=e.getel("@"+i.listid),i.el&&(i.el=i.el[f],r.watchcb.watch(i,t,a,n))}else r.watchcb.watch(i,t,a,n)})}}},e.__confirm_add_data_to_el=function(e,t,n,a,i){var o=e.__getData(t);if(!Array.isArray(o))return i(!1);n=parseInt(n),-1==n&&(n=o.length),o.splice(n,0,a);var s=e[r.aprand].watching_list[t]||e[r.aprand].watching_list["this.data."+t];Array.isArray(s)&&s.forEach(function(e){r.list.$add.call(o,e,n,a)}),i(!0)},e.__confirm_del_data_to_el=function(e,t,n,a,i){var o=e.__getData(t);if(!Array.isArray(o))return i(!1);n=parseInt(n),-1==n&&(n=o.length),o.splice(n,a);var s=e[r.aprand].watching_list[t]||e[r.aprand].watching_list["this.data."+t];Array.isArray(s)&&s.forEach(function(e){r.list.$delat.call(o,e,n)}),i(!0)}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){function t(e){return e=""+e,e.charAt(0).toLowerCase()+e.slice(1)}var n=function(e,r){var r=r||[];if(e.event)for(var a in e.event)-1===r.indexOf(a)&&r.push(t(a));if(e.childNodes)for(var a in e.childNodes)r=n(e.childNodes[a],r);return r};e.__bind_as_top_view=function(e,t){r.elset(t,"bindsidofvm",this.sid),t._hasbindastop=t._hasbindastop||[];var a=n(e,[]);for(var i in a)-1==t._hasbindastop.indexOf(a[i])&&(t._hasbindastop.push(a[i]),this.__bind(t,a[i],r.eventdom.all))},e.__unbindel=function(e){var t=this[r.aprand].els_binded,n=t.length;for(i=n-1;i>-1;i--)if(t[i][0]===e){e.removeEventListener(t[i][1],t[i][2]),t.splice(i,1);break}},e.__unbindall=function(e,t,n){this[r.aprand].els_binded.forEach(function(e){e[0].removeEventListener(e[1],e[2])}),this[r.aprand].els_binded=[]},e.__bind=function(e,t,n,a){if(e&&r.isfn(n)&&"string"==typeof t&&e.addEventListener){if(a)return void e.addEventListener(t,n);var i=this,o=function(e){n.call(e.target,e,i)};this[r.aprand].els_binded.push([e,t,o]),e.addEventListener(t,o)}},e.__bind_events=function(e){var t=this[r.aprand].domeventnames,n=this[r.aprand].domeventnames_binded;for(var a in t)if(a.indexOf(":")>-1&&(a=a.substr(0,a.indexOf(":"))),-1==n.indexOf(a))if(n.push(a),e)this.__bind(e||this.pel,a,r.eventdom.all);else for(var i in this[r.aprand].els)this.__bind(this[r.aprand].els[i],a,r.eventdom.all)}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){function t(e,t){if(!Array.isArray(e)||!Array.isArray(t))return[];for(var n=[],r=0;r<e.length;r++)for(var a=0;a<t.length;a++)e[r]==t[a]&&(n.push(e[r]),e.splice(r,1),t.splice(a,1),r--,a--);return n}e.__delel_watchcb_notfind=function(e){for(var t in this[r.aprand].elsdom.id)this[r.aprand].elsdom.id[t]==e&&delete this[r.aprand].elsdom.id[t]},e.getel=function(e){if(!e)return this[r.aprand].els;"#"!==e[0]&&"."!==e[0]&&"$"!==e[0]&&"@"!==e[0]&&(e="#"+e);var n=this[r.aprand].elsdom;if("#"==e[0]){var a=n.id[e.substr(1)];return void 0==a?null:null==a?(delete n.id[e.substr(1)],null):document.getElementById(a)}var i=[],o=[];if("@"==e[0])o=n.listel[e.substr(1)];else if("$"==e[0])o=n.role[e.substr(1)];else if("."==e[0])if(e=e.substr(1),-1==e.indexOf("."))o=n.class[e];else{e=e.split(".");for(var s in e)e[s]=r.tool.trim(e[s]);var l=[];for(var s in e)l[s]=[],Array.isArray(n.class[e[s]])&&n.class[e[s]].forEach(function(e){l[s].push(e)});if(o=t(l[0],l[1]),l.length>2)for(var d=2;d<l.length;d++)o=t(o,l[d])}if(o){for(var d=0,c=o.length;d<c;d++)i.push(document.getElementById(o[d])||null);for(var d=o.length-1;d>-1;d--)null==i[d]&&(i.splice(d,1),o.splice(d,1))}return i},e.__regel=function(e,t,n,a){var i=this[r.aprand].elsdom;if("id"==e)i.id[t]=n;else if("listel"==e){i.listel[t]=i.listel[t]||[];var o=i.listel[t];-1==o.indexOf(n)&&(void 0!=a?o.splice(a,0,n):o.push(n))}else if("classList"==e){var s=t;for(var l in s)!0===r.wap.config.strategy.cacheClassesAll&&-1!==this.config.cacheClasses.indexOf(s[l])&&(i.class[s[l]]=i.class[s[l]]||[],-1==i.class[s[l]].indexOf(n)&&(void 0!=a?i.class[s[l]].splice(a,0,n):i.class[s[l]].push(n)))}else"role"==e&&(i.role[t]=i.role[t]||[],-1==i.role[t].indexOf(n)&&(void 0!=a?i.role[t].splice(a,0,n):i.role[t].push(n)))},e.delel=function(e,t,n){var a,i,o;if(e){var s=this[r.aprand].elsdom;if(a=e.getAttribute("id"),i=e.getAttribute("classList"),o=e.getAttribute("role"),a){for(var l in s.id)s.id[l]===a&&delete s.id[l];if(s.id[a]&&delete s.id[a],e.listid){var d=s.listel[e.listid];if(Array.isArray(d)){var c=d.indexOf(a);c>-1&&d.splice(c,1)}}if(o&&s.role[o]){var c=s.role[o].indexOf(a);c>-1&&s.role[o].splice(c,1)}if(i)for(var l in i)if(s.class[i[l]]){var c=s.class[i[l]].indexOf(a);c>-1&&s.class[i[l]].splice(c,1)}}if(e.childNodes)for(var p=0,f=e.childNodes.length;p<f;p++)1==e.childNodes[p].nodeType&&this.delel.call(this,e.childNodes[p],!0);t||e.parentNode.removeChild(e)}}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.sethtml=function(e,t){if("string"==typeof e&&(e=this.getel(e)),e){for(var n=e.childNodes,r=n.length-1;r>-1;r--)e.removeChild(n[r]);this.addhtml(e,t)}},e.addhtml=function(e,t){if("string"==typeof e&&(e=this.getel(e)),e){var n=this,a=r.calhtmltojson(t,n[r.aprand].node_max_sn+1,0);n[r.aprand].nodejson.push(a[0]),r.create.nodes(n,a[0],n[r.aprand].rootscope,e),this.__bind_as_top_view(a[0],e)}}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.pubapp=function(e,t,n){r.wap.pub(e,t,this,n)},e.pubup=function(e,t,n){if(this.pvm){var a=this[r.aprand].pvmevent[e];if(a||(a=this.pvm.event[this.id+"."+e]),a&&(r.isfn(a)||(a=r.tool.objGetDeep(this.pvm,a)),r.isfn(a))){var i=this,o=this.pvm;a.call(this.pvm,t,this,function(e){r.isfn(n)&&n.call(i,e,o)})}}},e.pubdown=function(e,t,n,a){var i=this;if("object"==typeof e&&(e=e.id),!e)return!1;var o=[];o="*"==e?Object.keys(this[r.aprand].vmchildren):[e],o.forEach(function(e){var o=i.getChild(e);if(!o)return void(r.isfn(a)&&a({error:"no.such."+e}));var s=o.event["pvm."+t];r.isfn(s)&&s.call(o,n,i,function(e){r.isfn(a)&&a.call(i,e,o)})})}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.__addto_onstart=function(e){1!==this[r.aprand].has_started?this[r.aprand].cbs_onstart.push(e):r.tryfn(this,e,[this],"vm.onstart")},e.__addto_onshow=function(e){1!==this[r.aprand].has_started?this[r.aprand].cbs_onshow.push(e):r.tryfn(this,e,[this],"vm.onshow")},e.__onshow=function(){for(var e in this[r.aprand].cbs_onshow)r.tryfn(this,this[r.aprand].cbs_onshow[e],[this],"vm.onshow");this[r.aprand].cbs_onshow=[];for(var e in this[r.aprand].cbs_onstart)this[r.aprand].cbs_onstart[e].call(this);this[r.aprand].cbs_onstart=[],r.isfn(this[r.aprand].startcb_of_vmstart)&&r.tryfn(this,this[r.aprand].startcb_of_vmstart,[],"vm.start.cb,id="+this.id),this.__clean_after_start()};var t=function(e,n){for(var a=0,i=n.length;a<i;a++)"slot"!=n[a].tag||n[a].attr&&n[a].attr.name?t(e,n[a].childNodes):r.inject.use_inject_nodes_when_create(e,n[a])};e.__vmstart=function(e){if(1!=this[r.aprand].has_started){var n=this;if(r.isfn(e)&&(n[r.aprand].startcb_of_vmstart=e),!r.isfn(this.hookStart)||this.__hookStart_has_called){r.tryvmfn(n.pvm,n,"beforechildstart"),r.tryvmfn(n,null,"beforestart");var a=r.gcache.get_body(n);r.isfn(n.hookTemplate)?r.cal.nodejson(n,n.hookTemplate(a)):r.cal.nodejson(n,a),t(n,n[r.aprand].nodejson[0].childNodes);var i=r.gcache.get_vmstyle(n);i&&(r.isfn(n.hookStyle)&&(i=n.hookStyle(i)),r.web_private_style.add(n,i)),r.start.web(n),n[r.aprand].has_started_self=1,0==r.wap.config.strategy.append_to_pel_wait_loading_child_vm&&r.tryvmfn(n,null,"__append_bin_el"),0==n[r.aprand].loadingsub_count&&r.tryvmfn(n,null,"__onstart_a_zero_sub")}else{r.wap.hookstart_vm=n;try{this.hookStart.call(this,function(t){r.wap.hookstart_vm=null,n.__hookStart_has_called=1,!1!==t?n.__vmstart(e):(n[r.aprand].startcb_of_vmstart&&n[r.aprand].startcb_of_vmstart(!1),n.__init(!0))})}catch(t){r.devalert("hookStart error",n.src,t),r.wap.hookstart_vm=null,this.hookStart=null,n.__vmstart(e)}}}},e.__onstart_a_zero_sub=function(){var e=this;this.__top_fragment&&1==this[r.aprand].has_started_self&&1==r.wap.config.strategy.append_to_pel_wait_loading_child_vm&&r.tryvmfn(e,null,"__append_bin_el"),setTimeout(function(){this.pvm?0==--this.pvm[r.aprand].loadingsub_count&&this.pvm.__onstart_a_zero_sub():0==r.wap.hasstart&&(r.wap.hasstart=1,r.wap.onstart())}.bind(this),0)},e.__after_append_real=function(){var e=this;e[r.aprand].has_started=1,delete e._is_fresh_ing,e.__onshow.call(e),r.tryvmfn(e,e,"onstart"),r.tryvmfn(e.pvm,e,"onchildstart")},e.__after_append=function(){var e=this;1==r.wap.config.strategy.append_to_pel_wait_loading_child_vm&&this.pvm?this.pvm.__addto_onshow(function(){e.__after_append_real()}):this.__after_append_real()},e.__append_bin_el=function(){var e=this,t=e.__top_fragment;if(t){var n=t.childNodes||[],a=n.length;for(o=0;o<a;o++)e[r.aprand].els.push(n[o]);var i=e.pel,o=0,s=!1;if(1!=e[r.aprand].nodejson[0].childNodes.length||1!=a||"ppel"!=r.elget(i,"appendto")&&"ppel"!=e.config.appendto)i.appendChild(t);else{e.config.appendto="ppel",r.elset(i,"_role_","placeholder");var l=n[0],d=i.parentNode;d.appendChild(l),i.after(l),d.removeChild(i),e.__addto_onshow(function(){e.ppel=e[r.aprand].els[0].parentNode}),l.replaced_pel=i;var c=e[r.aprand].nodejson[0].childNodes[0];if(c.event=c.event||{},e[r.aprand].pvmelevent)for(var p in e[r.aprand].pvmelevent)c.event[p]=e[r.aprand].pvmelevent[p];e.__bind_as_top_view(c,l,"because.ppel"),s=!0}delete e.__top_fragment;for(var p in e[r.aprand].pvmelevent)e[r.aprand].domeventnames[p]=1;s||e.__bind_events(),setTimeout(function(){e.__after_append()},0)}},e.restart=function(e,t){this.close(),r.isfn(e)?this.start(t):r.isobj(e)?(e.src&&this.__setsrc(e.src),this._is_fresh_ing=!0===e.fresh,this.start(t)):this.start(t)},e.start=function(e){r.isfn(e)||(e=function(){}),this[r.aprand].has_defined?this.__initdata_then_start(e):r.loadsubvm.load(this,e)},e.show=function(){for(var e=this[r.aprand].els,t=e.length-1;t>-1;t--)e[t].style.display=r.elget(e[t],"lastdisplay")||""},e.hide=function(){for(var e=this[r.aprand].els,t=e.length-1;t>-1;t--)r.elset(e[t],"lastdisplay",e[t].style.display||""),e[t].style.display="none"}}},function(e,t,n){var r=n(0);e.exports.setproto=function(e){e.__initdata_then_start=function(e){var t=this;r.elset(t.pel,"bindsidofvm",t.sid),r.elset(t.pel,"isvmpel",!0),t[r.aprand].rootscope={alias:"",path:"",pscope:null,aid:0},r.inject.inject_from_pvm_before_start(t,t[r.aprand].rootscope),r.tool.deepmerge(t.data,t[r.aprand].append_data),r.tool.deepmerge(t.option,t[r.aprand].append_option),r.wap.store.vminit.call(r.wap,t,function(n){if("object"==typeof n&&!Array.isArray(n)){for(var a in n)t[r.aprand].datafrom_store.push(a);if(r.wap.config.strategy.auto_deepclone_store_data)r.tool.deepmerge(t.data,r.tool.objClone(n));else for(var a in n)t.data[a]=n[a]}t.pvm&&t.pvm.dataProxy&&r.isfn(t.pvm.dataProxy.vminit)?t.pvm.dataProxy.vminit.call(t.pvm,t,function(n){if(n&&"object"==typeof n&&!Array.isArray(n)){for(var a in n)t[r.aprand].datafrom_parent.push(a);if(r.wap.config.strategy.auto_deepclone_store_data)r.tool.deepmerge(t.data,r.tool.objClone(n));else for(var a in n)t.data[a]=n[a]}t.__vmstart(e)}):t.__vmstart(e)})}}},function(e,t,n){var r=n(0),a=n(1),i=n(2),o=n(48),s={};e.exports=s,s.evalResponse_genmod=function(e,t,n,a,o,s){if("vm"==e.type&&s){var l=i(e.id,"",e.type,"genmod_1",e.urlid);if(l&&!l.__has_extend_ed){l.__has_extend_ed=1,l.__extend_from=s;var d=i(s,"","vm","genmod_2",e.urlid);if(d){r.gcache.add_vmlib_ref(s,e.urlid,"vmextend"),d=r.tool.objClone(d),r.tool.deepmerge_notreplace(l,d);var c,p=r.gcache.get_body_extend(s);if(r.isfn(l.extendTemplate))try{c=l.extendTemplate(p,a)}catch(e){r.devalert("extendTemplate",e)}else c=a||p;var f="",u=r.gcache.get_vmstyle_extend(s);if(r.isfn(l.extendStyle))try{f=l.extendStyle(u,o)}catch(e){r.devalert("extendStyle",e)}else f=o||u;r.gcache.newvmbody(e.id,c),r.gcache.add_vmstyle_inline(e.id,f)}}t(null,l)}else{var h=i(e.id,"",e.type,"genmod_3",e.urlid);"vm"==e.type&&(r.gcache.newvmbody(e.id,a),o&&r.gcache.add_vmstyle_inline(e.id,o)),t(null,h)}},s.evalResponse=function(e,t,n,l){if(!e.url||!e.id)return void n({type:"para",error:"!spec.url"},null);if(e.loadfilefresh&&i.loadfilefresh_clear(e.id),"css"==e.type||"block"==e.type||"text"==e.type)return void n(null,t);if("json"==e.type){var d={};try{d=JSON.parse(t)}catch(e){r.devalert("json error")}return i.define(e.id,d,e.type,e.refid),void n(null,r.tool.objClone(d))}var c=o(t,e.id,e.type,e),p="require,module,exports,";p+="app";c[0];try{var f=new Function(p,(1==r.wap.config.isdev?"//# sourceURL="+e.url+"\n":"")+c[0])}catch(t){return r.devalert("js_SyntaxError:"+e.url,t),void n(new Error("js_SyntaxError"),null)}if(i.define(e.id,f,e.type,e.refid),c[4]||c[5].length>0){var u=c[4],h=c[5],v=[];for(var _ in h){var m=h[_].src,g=h[_].type;if("css"==g)v.push({url:m,type:"css"});else if("vm"==g)v.push({url:m,type:"vm"});else if("block"==g){if(h[_].src){var b={url:h[_].src,type:"block"};h[_].importname?b.importname=h[_].importname:h[_].blockpathname&&(b.blockpathname=h[_].blockpathname),v.push(b)}}else"lib"!=g&&"json"!=g||v.push({id:m,url:m,type:g,importname:h[_].importname})}u&&v.push({url:u,type:"vm",ifextend:1});for(var x=v.length-1;x>-1;x--)v[x].fresh=e.fresh,v[x].pvmpath=e.id,v[x].loadvm=e.loadvm,"vm"==v[x].type&&r.wap.config.path.vm[v[x].url]?(v[x].url=r.wap.config.path.vm[v[x].url],v[x].knowpath=!0):"lib"!=v[x].type&&"json"!=v[x].type||!r.wap.config.path.lib[v[x].url]||(v[x].url=r.wap.config.path.lib[v[x].url],v[x].knowpath=!0);for(var _ in v)a.cal_spec_path(v[_],e.url),v[_].ifextend&&(u=v[_].id);for(var x=v.length-1;x>-1;x--)v[x].from="deps",v[x].refid=r.gcache.geturlsid(e.id),!e.fresh&&r.gcache.check(v[x].type,v[x].id,v[x].refid)&&v.splice(x,1);0==v.length?s.evalResponse_genmod(e,n,c[1],c[2],c[3],u):l(v,function(t,a,i){if(t){r.devalert("needs error",e.id,e.url,a);for(var o in a)a[o]&&r.onerror(a[o].type,v[o].id,a[o].error);s.evalResponse_genmod(e,n,c[1],c[2],c[3],u)}else s.evalResponse_genmod(e,n,c[1],c[2],c[3],u)})}else s.evalResponse_genmod(e,n,c[1],c[2],c[3],c[4])}},function(e,t,n){var r=n(0),a=n(1),i=/(?:^|[^\w\$_.])require\s*\(\s*["']([^"']*)["']\s*\)/g,o=new RegExp(" el-hook=['\"](.*?)['\"]","ig"),s=new RegExp("<style(.*?)>([^<]*)</style>","ig"),l=new RegExp("<body(.*?)>([\\s\\S]*?)</body>","ig"),d=new RegExp("<template(.*?)>([\\s\\S]*?)</template>","ig"),c=new RegExp("<script(.*?)>([\\s\\S]*?)<\/script>","ig"),p=new RegExp("<html(.*?)>([\\s\\S]*?)</html>","ig"),f=new RegExp("<head(.*?)>([\\s\\S]*?)</head>","ig"),u=new RegExp("<import([\\s\\S]*?)>","ig"),h=function(e,t){if(""!=t.src){var n=0==e.length?0:1;for(var r in e){var n=1;for(var a in t)t[a]!==e[r][a]&&(n=0);if(1==n)break}0==n&&e.push(t)}};e.exports=function(e,t,n,v){var _=r.delrem(e),m="vm"==n?"":_,g="",b="",x="",y="",w="",j=[];if("vm"==n){for(var k in r.wap.config.precode_regexp)_=_.replace(r.wap.config.precode_regexp[k],function(e,t,n,a){return"<"+k+t+">"+r.tool.htmlescape(n.replace(/\n/,""))+"</"+k+">"});_=_.replace(s,function(e,t,n,r){var a;return t&&(a=t.match(/src=['"](.*?)['"]/)),a?h(j,{type:"css",src:a[1],urlid:v.urlid}):n&&(g+=n),""}),_=_.replace(u,function(e,t){var n,i,o;t.replace(/[\s]{1,}type=['"]([\S]*?)['"]([\s]{0,}|[\>\/])/i,function(e,t){n=t}),t.replace(/[\s]{1,}src=['"]([\S]*?)['"]([\s]{0,}|[\>\/])/i,function(e,t){i=t}),t.replace(/[\s]{1,}name=['"]([\S]*?)['"]([\s]{0,}|[\>\/])/i,function(e,t){o=t});var i=a.gen_path(i,v.id,!0);return"prototype"==n?w=i:"vm"==n?r.gcache.add_vm_src_import(v.urlid,o,i):"block"==n&&r.gcache.add_block_src_import(v.urlid,o,i),"block"==n&&h(j,{type:n,from:"import",src:i,importname:o||i}),""}),_=_.replace(l,function(e,t,n){return b=n,""}),_=_.replace(c,function(e,t,n){return m+=n,""}),_=_.replace(p,function(e,t,n){return y=n,""}),y&&(y=y.replace(f,function(e,t,n){return x=n,""}),b||(b=y)),b||(_=_.replace(d,function(e,t,n){return b=n,""})),b||(b=_),b&&(b=b.replace(/\{app\.(.*?)}/g,function(e,t,n,a){return r.tool.objGetDeep(r.wap,t)})),b=b.replace(o,function(e,t,n,i){if(r.gcache.use.elhook[t]||0===t.indexOf("this."))return' el-hook="'+t+'" ';if(r.wap.config.path.elhook[t])return h(j,{type:"lib",src:r.wap.config.path.elhook[t]}),' el-hook="'+t+'" ';var o=a.gen_path(t,v.id,!0);return h(j,{type:"lib",src:o,importname:t}),' el-hook="'+o+'" '});for(var k in r.wap.config.block_regexp)b.replace(r.wap.config.block_regexp[k],function(e,t,n,a){h(j,{type:"block",src:r.wap.config.path.block[k],blockpathname:k}),delete r.wap.config.block_regexp[k]})}return m&&(m=m.replace(i,function(e,t,n,i){if(r.gcache.get_jslib(t))return e;var o={from:"require",type:"lib"};if(t.indexOf(".json")>0&&t.lastIndexOf(".json")===t.length-5&&(o.type="json"),r.wap.config.path.lib[t])return o.src=r.wap.config.path.lib[t],h(j,o),e;var s=a.gen_path(t,v.id,!0);return o.src=s,h(j,o),e.replace(t,s)})),m||0!=j.length||w||(m=b?"":_),[m,x,b,g,w,j]}}])});